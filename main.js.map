{"version":3,"sources":["app/audio.js","app/config.js","app/controllers/cmd-lc1.js","app/controllers/cmd-lc1/controls.js","app/controllers/cmd-lc1/lights.js","app/controllers/cmd-lc1/message.js","app/controllers/keyboard.js","app/controllers/launchpad.js","app/controllers/launchpad/grid.js","app/controllers/launchpad/lights.js","app/controllers/launchpad/note.js","app/controllers/novation-launchcontrol.js","app/gibberish-audio.js","app/gui.js","app/gui/cantor.js","app/main.js","app/midi.js","app/native-audio.js","app/player.js","app/state.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,YAAY,CAAC;;;;;;;;;8BAGmB,iBAAiB;;qBAE/B,OAAO;;;;AAGzB,SAAS,wBAAwB,GAA6C;MAA5C,GAAG,yDAAG,EAAE;MAAE,MAAM,yDAAG,CAAC,KAAK,EAAC,OAAO,EAAC,OAAO,CAAC;;AAC1E,KAAG,CAAC,GAAG,CAAE,UAAC,EAAE,EAAK;AACf,QAAI,MAAM,GAAG,mBAAM,IAAI,CAAC,EAAE,CAAC;QAC9B,MAAM,GAAG,uBAAO,EAAE,CAAC,CAAC;;AAEjB,UAAM,CAAC,OAAO,CAAE,UAAC,KAAK,EAAC,CAAC,EAAK;AAC3B,UAAI,MAAM,CAAC,KAAK,CAAC,EAAE,MAAM,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;KAClD,CAAC,CAAC;GACJ,CAAC,CAAC;CACJ;;AAED,SAAS,KAAK,CAAC,CAAC,EAAE,EAAE,EAAE;AACpB,SAAO,EAAE,CAAC,uBAAO,CAAC,CAAC,CAAC,CAAC;CACtB;;AAED,SAAS,YAAY,CAAC,EAAE,EAAE;AACxB,SAAO,EAAE,CAAC,uBAAO,mBAAM,KAAK,CAAC,CAAC,CAAC;CAChC;;AAED,SAAS,SAAS,CAAC,EAAE,EAAE;AACrB,SAAO,uBAAO,GAAG,CAAE,UAAC,CAAC,EAAC,CAAC;WAAK,EAAE,CAAC,CAAC,CAAC;GAAA,CAAE,CAAC;CACrC;;AAED,SAAS,mBAAmB,CAAC,EAAE,EAAE;AAC/B,SAAO,uBAAO,GAAG,CAAE,UAAC,CAAC,EAAC,CAAC,EAAK;AAAE,QAAI,CAAC,CAAC,EAAE,IAAI,mBAAM,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;GAAE,CAAE,CAAC;CACnE;;qBAEc,EAAE,MAAM,0BAAE,UAAU,8BAAE,wBAAwB,EAAxB,wBAAwB,EAAE,YAAY,EAAZ,YAAY,EAAE,SAAS,EAAT,SAAS,EAAE,mBAAmB,EAAnB,mBAAmB,EAAE;;;;;ACnC7G,YAAY;;;;;AAEZ,IAAI,MAAM,GAAG;AACX,SAAO,EAAE;AACP,SAAK,EAAE;AACL,iBAAW,EAAE,IAAI;AACjB,mBAAa,EAAE,KAAK;AACpB,mBAAa,EAAE,IAAI;KACpB;AACD,iBAAa,EAAE,IAAI;AACnB,OAAG,EAAE,EAAE;GACR;;AAED,OAAK,EAAE;AACL,yBAAqB,EAAE,KAAK;GAC7B;CACF;;AAED,IAAI,QAAQ,GAAG;AACb,SAAO,EAAE;AACP,SAAK,EAAE;AACL,iBAAW,EAAE,KAAK;AAClB,mBAAa,EAAE,KAAK;AACpB,mBAAa,EAAE,IAAI;KACpB;AACD,iBAAa,EAAE,KAAK;AACpB,OAAG,EAAE,EAAE;GACR;;AAED,OAAK,EAAE;AACL,yBAAqB,EAAE,IAAI;GAC5B;CACF;;qBAEc,EAAE,MAAM,EAAN,MAAM,EAAE;;;;;AClCzB,YAAY,CAAC;;;;;;;;;;oBAEU,MAAM;;;;wCACN,6BAA6B;;;;yCAC7B,8BAA8B;;;;uCAC9B,4BAA4B;;;;sBAC5B,QAAQ;;;;qBACR,OAAO;;;;mBACP,KAAK;;;;AAE5B,IAAI,EAAE,CAAC;;AAEP,SAAS,aAAa,CAAC,GAAG,EAAE;AACtB,SAAG,GAAG,sCAAQ,WAAW,CAAC,GAAG,CAAC;;gCACnB,uCAAS,aAAa,CAAC,GAAG,CAAC;;;;MAArC,CAAC;MAAE,GAAG;;AACX,uCAAO,UAAU,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;AAC3B,mBAAI,aAAa,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;CAC3B;;AAED,SAAS,sBAAsB,CAAC,GAAG,EAAE;AACnC,MAAI,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AACtB,yCAAS,aAAa,CAAC,GAAG,CAAC,CAAC;AAC5B,uCAAO,aAAa,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;CAC/B;;AAED,SAAS,oBAAoB,CAAC,GAAG,EAAE;AACjC,MAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE;MACf,EAAE,GAAG,mBAAM,IAAI,CAAC,CAAC,CAAC;MAClB,GAAG,GAAG,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,UAAC,CAAC;WAAK,CAAC,GAAG,IAAI;GAAA,CAAC,CAAC;AAC1C,IAAE,CAAC,OAAO,GAAG,GAAG,CAAC;AACjB,qBAAM,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;AAClB,sBAAO,aAAa,CAAC,CAAC,EAAE,EAAE,CAAC,OAAO,EAAE,EAAE,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;AACxD,uCAAO,UAAU,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;AAC3B,mBAAI,aAAa,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;CAC3B;;AAED,SAAS,iBAAiB,CAAC,GAAG,EAAE;AAC9B,MAAI,GAAG,GAAG,sCAAQ,UAAU,CAAC,GAAG,CAAC;MAC7B,GAAG,GAAG,mBAAM,IAAI,CAAC,GAAG,CAAC;MACrB,GAAG,GAAG,GAAG,CAAC,OAAO;MACjB,GAAG,GAAG,GAAG,CAAC,UAAU,CAAC;AACzB,yCAAS,QAAQ,CAAC,GAAG,CAAC,CAAC;AACvB,uCAAO,QAAQ,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;AACzB,uCAAO,aAAa,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;AAC9B,uCAAO,UAAU,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;CAC5B;;AAED,SAAS,kBAAkB,CAAC,CAAC,EAAE;AAC7B,MAAI,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC;AACjB,MAAI,sCAAQ,SAAS,CAAC,GAAG,CAAC,EAAE;AAC1B,iBAAa,CAAC,GAAG,CAAC,CAAC;GAEpB,MAAM,IAAI,sCAAQ,UAAU,CAAC,GAAG,CAAC,EAAE;AAClC,qBAAiB,CAAC,GAAG,CAAC,CAAC;GAExB,MAAM,IAAI,sCAAQ,QAAQ,CAAC,GAAG,CAAC,EAAE;AAChC,QAAG,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,EAAE;AACd,4BAAsB,CAAC,GAAG,CAAC,CAAC;KAC7B,MAAM;AACL,0BAAoB,CAAC,GAAG,CAAC,CAAC;KAC3B;GACF;CACF;;AAED,SAAS,cAAc,CAAC,KAAK,EAAE,MAAM,EAAE;AACrC,MAAI,KAAK,IAAI,MAAM,EAAE;AACnB,SAAK,CAAC,aAAa,GAAG,kBAAkB,CAAC;AACzC,MAAE,GAAG,EAAE,KAAK,EAAL,KAAK,EAAE,MAAM,EAAN,MAAM,EAAE,CAAC;AACvB,yCAAO,aAAa,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;AAC5B,yCAAO,QAAQ,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;GACxB,MAAM;AACL,UAAM,wCAAwC,CAAC;GAChD;CACF;;AAED,SAAS,UAAU,GAAG;AACpB,oBAAW,SAAS,CAAC,cAAc,EAAE,YAAY,CAAC,CAAC;AACnD,yCAAS,IAAI,EAAE,CAAC;CACjB;;qBAEc,UAAU;;;;;AChFzB,YAAY,CAAC;;;;;;;;sBAEM,QAAQ;;;;qBACR,OAAO;;;;mBACP,KAAK;;;;AAExB,IAAI,aAAa,GAAG,CAAC,CAAC;AACtB,IAAI,aAAa,GAAG,CAAC,CAAC;;AAEtB,IAAI,OAAO,GAAI,CAAC;IACZ,QAAQ,GAAG,IAAI;IACf,QAAQ,GAAG,EAAE,CAAC;;AAElB,SAAS,IAAI,CAAC,CAAC,EAAE,IAAI,EAAE;AACrB,UAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;CACpB;;AAED,SAAS,IAAI,CAAC,CAAC,EAAE;AACf,SAAO,QAAQ,CAAC,CAAC,CAAC,CAAC;CACpB;;AAGD,SAAS,IAAI,GAAG;AACd,MAAI,CAAC,GAAG,CAAC,CAAC;;;AAGV,UAAQ,CAAC,OAAO,CAAC,GAAG,mBAAM,IAAI,CAAC,OAAO,CAAC,CAAC;AACxC,UAAQ,CAAC,OAAO,CAAC,CAAC;;AAElB,SAAO,CAAC,EAAE,EAAE;AAAE,YAAQ,CAAC,CAAC,CAAC,GAAG,mBAAM,IAAI,CAAC,CAAC,CAAC,CAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;GAAE;CAC1D;;AAED,SAAS,QAAQ,CAAC,CAAC,EAAE;;;AAGnB,MAAI,QAAQ,GAAG,OAAO,CAAC;;AAEvB,SAAO,GAAG,CAAC,CAAC;AACZ,qBAAM,KAAK,GAAG,OAAO,CAAC;;;;;AAKtB,mBAAI,aAAa,CAAC,QAAQ,EAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;AACvD,mBAAI,aAAa,CAAC,OAAO,EAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC;CAEtD;;;;;AAKD,SAAS,aAAa,CAAC,GAAG,EAAE;AAC1B,MAAI,GAAG,GAAG,QAAQ,CAAC,OAAO,CAAC;MACvB,OAAO,GAAG,GAAG,CAAC,OAAO;MACrB,GAAG,CAAC;AACR,MAAI,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,SAAS,EAAE;AACtC,OAAG,GAAG,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,QAAQ,GAAG,GAAG,CAAC,MAAM,CAAC;AACnD,OAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;AACvB,OAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;AACvB,WAAO,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC;GAC5B;AACD,sBAAO,aAAa,CAAC,OAAO,EAAE,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;;AAGhE,SAAO,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;CAC3B;;AAED,SAAS,cAAc,GAAG;AACxB,eAAa,CAAC,EAAC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,EAAC,CAAC,CAAC;CAC9C;;AAED,SAAS,oBAAoB,GAAG;AAC9B,MAAI,GAAG,GAAG,QAAQ,CAAC,OAAO,CAAC;MACvB,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC;;AAE1B,KAAG,CAAC,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,UAAC,CAAC;WAAK,GAAG,GAAG,CAAC;GAAA,CAAC,CAAC;AAC1C,qBAAM,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,GAAG,OAAO,CAAC;;AAEtC,mBAAI,aAAa,CAAC,OAAO,EAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AACvC,gBAAc,EAAE,CAAC;CAClB;;AAED,SAAS,mBAAmB,GAAG;AAC7B,MAAI,GAAG,GAAG,QAAQ,CAAC,OAAO,CAAC;MACvB,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC;;AAE1B,KAAG,CAAC,OAAO,GAAG,CAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,CAAC,CAAC;AAChC,qBAAM,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,GAAG,OAAO,CAAC;;AAEtC,mBAAI,aAAa,CAAC,OAAO,EAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AACvC,gBAAc,EAAE,CAAC;CAClB;;AAED,SAAS,aAAa,CAAC,GAAG,EAAE,OAAO,EAAE;AACnC,MAAI,CAAC,GAAG,mBAAM,IAAI,CAAC,OAAO,CAAC,CAAC;AAC5B,GAAC,CAAC,UAAU,GAAG,OAAO,GAAG,CAAC,CAAC,UAAU,GAAG,GAAG,GAAG,GAAG,CAAC;AAClD,MAAI,CAAC,CAAC,UAAU,GAAG,aAAa,EAAE,CAAC,CAAC,UAAU,GAAG,aAAa,CAAC;AAC/D,MAAI,CAAC,CAAC,UAAU,GAAG,aAAa,EAAE,CAAC,CAAC,UAAU,GAAG,aAAa,CAAC;;AAE/D,GAAC,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC;AACxD,qBAAM,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;AACvB,UAAQ,CAAC,OAAO,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,UAAU,CAAC;AAC5C,mBAAI,gBAAgB,CAAC,OAAO,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC;CAC7C;;qBAIc,EAAE,IAAI,EAAJ,IAAI,EAAE,IAAI,EAAJ,IAAI,EAAE,IAAI,EAAJ,IAAI,EAAE,QAAQ,EAAR,QAAQ,EAAE,aAAa,EAAb,aAAa,EAAE,mBAAmB,EAAnB,mBAAmB,EAAE,oBAAoB,EAApB,oBAAoB,EAAE,cAAc,EAAd,cAAc,EAAE,aAAa,EAAb,aAAa,EAAI;;;;;AC3GxI,YAAY,CAAC;;;;;;;;wCAEO,6BAA6B;;;;AAEjD,SAAS,EAAE,CAAC,EAAE,EAAE,IAAI,EAAE;AACpB,IAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;CAChC;AACD,SAAS,GAAG,CAAC,EAAE,EAAE,IAAI,EAAE;AACrB,IAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;CAClC;;AAED,SAAS,OAAO,CAAC,EAAE,EAAE,IAAI,EAAE;AACzB,IAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;CAChC;AACD,SAAS,SAAS,CAAC,EAAE,EAAE,IAAI,EAAE;AAC3B,IAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;CAChC;;AAED,SAAS,aAAa,CAAC,EAAE,EAAE,GAAG,EAAE;AAC9B,MAAI,CAAC,GAAG,EAAE,CAAC;AACX,SAAO,CAAC,EAAE,EAAE;AACV,OAAG,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;GACjB;AACD,SAAO,GAAG,EAAE,EAAE;AACZ,MAAE,CAAC,EAAE,EAAE,GAAG,GAAG,EAAE,CAAC,CAAC;GAClB;CACF;;AAED,SAAS,QAAQ,CAAC,EAAE,EAAE,CAAC,EAAE;AACvB,MAAI,CAAC,GAAG,CAAC,CAAC;AACV,SAAO,CAAC,EAAE,EAAE;AACV,aAAS,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;GACvB;AACD,SAAO,CAAC,EAAE,EAAE,sCAAQ,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;CAClC;;AAED,SAAS,UAAU,CAAC,EAAE,EAAE,OAAO,EAAE;AAC/B,MAAI,CAAC,GAAG,CAAC;MACL,GAAG;MAAE,SAAS,CAAC;AACnB,SAAO,CAAC,EAAE,EAAE;AACV,OAAG,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AACjB,QAAI,GAAG,KAAK,SAAS,EAAE;AACrB,eAAS,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC;AAChC,QAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,EAAE,SAAS,CAAC,CAAC,CAAC;KAC1C;GACF;AACD,QAAM,CAAC,CAAC,GAAG,UAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;AAAE,MAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;GAAE,CAAC;CAC7D;;qBAEc,EAAE,aAAa,EAAb,aAAa,EAAE,QAAQ,EAAR,QAAQ,EAAE,UAAU,EAAV,UAAU,EAAE;;;;;ACjDtD,YAAY,CAAC;;;;;;;;AAEb,SAAS,IAAI,CAAC,GAAG,EAAE;AACjB,SAAO,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC;CACzC;;AAED,SAAS,SAAS,CAAC,GAAG,EAAE;AACtB,MAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;MACV,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AACf,SAAO,CAAC,KAAK,GAAG,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;CAC1C;;AAED,SAAS,WAAW,CAAC,GAAG,EAAE;AACxB,MAAI,OAAO,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE;MACrB,MAAM,GAAI,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AAC1B,SAAO,EAAE,OAAO,EAAP,OAAO,EAAE,MAAM,EAAN,MAAM,EAAE,CAAC;CAC5B;;AAGD,SAAS,UAAU,CAAC,GAAG,EAAE;AACvB,MAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AACf,SAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;CACxC;;AAED,SAAS,UAAU,CAAC,GAAG,EAAE;AACvB,SAAO,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;CACpB;;AAED,SAAS,QAAQ,CAAC,CAAC,EAAE;AACnB,SAAO,CAAC,GAAG,EAAE,CAAC;CACf;;AAGD,SAAS,OAAO,CAAC,GAAG,EAAE;AACpB,MAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AACf,SAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;CACxC;;AAED,SAAS,SAAS,CAAC,GAAG,EAAE;AACtB,SAAO,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;CACpB;;AAGD,SAAS,QAAQ,CAAC,GAAG,EAAE;AACrB,MAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AACf,SAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;CACxC;;AAGD,SAAS,cAAc,CAAC,IAAM,EAAE;6BAAR,IAAM;;MAAL,CAAC;MAAE,CAAC;;AAC3B,GAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;AAC3B,SAAO,CAAC,GAAG,CAAC,CAAC;CACd;AACD,SAAS,QAAQ,CAAC,GAAG,EAAE;AACrB,MAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;MACV,CAAC,GAAG,CAAC,GAAG,CAAC;MACT,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;AACzC,SAAO,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;CACf;;qBAGc;AACb,WAAS,EAAT,SAAS,EAAO,WAAW,EAAX,WAAW;AAC3B,YAAU,EAAV,UAAU,EAAM,UAAU,EAAV,UAAU,EAAG,QAAQ,EAAR,QAAQ;AACrC,SAAO,EAAP,OAAO,EAAS,SAAS,EAAT,SAAS;AACzB,UAAQ,EAAR,QAAQ,EAAQ,QAAQ,EAAR,QAAQ;AACxB,gBAAc,EAAd,cAAc;CACf;;;;;;;;;;;;;;;yCCnEsB,8BAA8B;;;;mBAClC,KAAK;;;;qBACL,OAAO;;;;sBACP,QAAQ;;;;qBACT,OAAO;;;;sBACN,QAAQ;;;;AAE3B,SAAS,YAAY,GAAG;;AAEtB,yCAAS,IAAI,EAAE,CAAC;;;AAGhB,KAAG,CAAC,GAAG,EAAE;WAAM,uCAAS,QAAQ,CAAC,CAAC,CAAC;GAAA,CAAC,CAAC;AACrC,KAAG,CAAC,GAAG,EAAE;WAAM,uCAAS,QAAQ,CAAC,CAAC,CAAC;GAAA,CAAC,CAAC;AACrC,KAAG,CAAC,GAAG,EAAE;WAAM,uCAAS,QAAQ,CAAC,CAAC,CAAC;GAAA,CAAC,CAAC;AACrC,KAAG,CAAC,GAAG,EAAE;WAAM,uCAAS,QAAQ,CAAC,CAAC,CAAC;GAAA,CAAC,CAAC;AACrC,KAAG,CAAC,GAAG,EAAE;WAAM,uCAAS,QAAQ,CAAC,CAAC,CAAC;GAAA,CAAC,CAAC;AACrC,KAAG,CAAC,GAAG,EAAE;WAAM,uCAAS,QAAQ,CAAC,CAAC,CAAC;GAAA,CAAC,CAAC;AACrC,KAAG,CAAC,GAAG,EAAE;WAAM,uCAAS,QAAQ,CAAC,CAAC,CAAC;GAAA,CAAC,CAAC;AACrC,KAAG,CAAC,GAAG,EAAE;WAAM,uCAAS,QAAQ,CAAC,CAAC,CAAC;GAAA,CAAC,CAAC;;;AAGrC,KAAG,CAAC,IAAI,EAAE;WAAM,uCAAS,QAAQ,CAAC,CAAC,mBAAM,KAAK,GAAG,CAAC,GAAG,CAAC,IAAK,CAAC,CAAC;GAAA,CAAC,CAAC;AAC/D,KAAG,CAAC,MAAM,EAAE;WAAM,uCAAS,QAAQ,CAAC,CAAC,mBAAM,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC;GAAA,CAAC,CAAC;;;AAI5D,KAAG,CAAC,GAAG,EAAE;WAAM,6BAA6B,CAAC,CAAC,EAAE,CAAC,CAAC;GAAA,CAAE,CAAC;AACrD,KAAG,CAAC,GAAG,EAAE;WAAM,6BAA6B,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;GAAA,CAAC,CAAC;;;AAGrD,KAAG,CAAC,GAAG,EAAE;WAAM,6BAA6B,CAAC,CAAC,EAAE,CAAC,CAAC;GAAA,CAAE,CAAC;AACrD,KAAG,CAAC,GAAG,EAAE;WAAM,6BAA6B,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;GAAA,CAAC,CAAC;;;AAGrD,KAAG,CAAC,GAAG,EAAE;WAAM,6BAA6B,CAAC,CAAC,EAAE,CAAC,CAAC;GAAA,CAAE,CAAC;AACrD,KAAG,CAAC,GAAG,EAAE;WAAM,6BAA6B,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;GAAA,CAAC,CAAC;;;AAGrD,KAAG,CAAC,GAAG,EAAE;WAAM,6BAA6B,CAAC,CAAC,EAAE,CAAC,CAAC;GAAA,CAAE,CAAC;AACrD,KAAG,CAAC,GAAG,EAAE;WAAM,6BAA6B,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;GAAA,CAAC,CAAC;;;AAGrD,KAAG,CAAC,GAAG,EAAE;WAAM,6BAA6B,CAAC,CAAC,EAAE,CAAC,CAAC;GAAA,CAAE,CAAC;AACrD,KAAG,CAAC,GAAG,EAAE;WAAM,6BAA6B,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;GAAA,CAAC,CAAC;;;AAIrD,KAAG,CAAC,GAAG,EAAE;WAAM,mBAAM,YAAY,CAAC,mBAAM,KAAK,CAAC;GAAA,CAAC,CAAC;;;AAGhD,KAAG,CAAC,GAAG,EAAE,YAAM;AAAE,QAAI,KAAK,GAAG,mBAAM,cAAc,CAAC,mBAAM,KAAK,CAAC,CAAC;AAC5D,QAAI,CAAC,KAAK,EAAE,OAAO;AACnB,2CAAS,IAAI,CAAC,mBAAM,KAAK,EAAE,KAAK,CAAC,CAAC;AAClC,uBAAM,wBAAwB,CAAC,CAAC,mBAAM,KAAK,CAAC,CAAC,CAAC;AAC9C,iCAA6B,CAAC,mBAAM,KAAK,kBAAkB,CAAC,CAAE;GAAE,CAAC,CAAC;;AAErE,KAAG,CAAC,GAAG,EAAE;WAAM,uCAAS,mBAAmB,EAAE;GAAA,CAAE,CAAC;;AAEhD,KAAG,CAAC,GAAG,EAAE;WAAM,uCAAS,oBAAoB,EAAE;GAAA,CAAE,CAAC;;AAGjD,KAAG,CAAC,GAAG,EAAE,YAAM;AAAE,2CAAS,aAAa,CAAC,CAAC,CAAC,aAAa,IAAI,CAAC,CAAE,uCAAS,cAAc,EAAE;GAAE,CAAC,CAAC;AAC3F,KAAG,CAAC,GAAG,EAAE,YAAM;AAAE,2CAAS,aAAa,CAAC,CAAC,aAAc,IAAI,CAAC,CAAE,uCAAS,cAAc,EAAE;GAAE,CAAC,CAAC;;;;;AAM3F,KAAG,CAAC,GAAG,EAAE;WAAM,oBAAO,MAAM,CAAC,mBAAM,KAAK,EAAE,CAAC,GAAG,EAAE,IAAI,CAAC;GAAA,CAAC,CAAC;AACvD,KAAG,CAAC,GAAG,EAAE;WAAM,oBAAO,MAAM,CAAC,mBAAM,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC;GAAA,CAAC,CAAC;AACtD,KAAG,CAAC,GAAG,EAAE;WAAM,oBAAO,UAAU,CAAC,mBAAM,KAAK,CAAC;GAAA,CAAC,CAAC;;;AAG/C,KAAG,CAAC,OAAO,EAAE;WAAM,mBAAM,mBAAmB,CAAE,UAAC,CAAC,EAAK;AAAE,0BAAO,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;KAAE,CAAC;GAAA,CAAC,CAAC;AAC5F,KAAG,CAAC,OAAO,EAAE;WAAM,mBAAM,mBAAmB,CAAE,UAAC,CAAC,EAAK;AAAE,0BAAO,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;KAAE,CAAC;GAAA,CAAC,CAAC;AAC3F,KAAG,CAAC,OAAO,EAAE;WAAM,mBAAM,mBAAmB,CAAE,UAAC,CAAC,EAAK;AAAE,0BAAO,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;KAAE,CAAC;GAAA,CAAC,CAAC;;;AAGpF,KAAG,CAAC,SAAS,EAAE;WAAM,mBAAM,SAAS,CAAE,UAAC,CAAC,EAAK;AAAE,0BAAO,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;KAAE,CAAC;GAAA,CAAC,CAAC;AACpF,KAAG,CAAC,SAAS,EAAE;WAAM,mBAAM,SAAS,CAAE,UAAC,CAAC,EAAK;AAAE,0BAAO,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;KAAE,CAAC;GAAA,CAAC,CAAC;AACnF,KAAG,CAAC,SAAS,EAAE;WAAM,mBAAM,SAAS,CAAE,UAAC,CAAC,EAAK;AAAE,0BAAO,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;KAAE,CAAC;GAAA,CAAC,CAAC;;;;AAK5E,MAAI,kBAAkB,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;MACjC,oBAAoB,GAAG,CAAC,GAAC,kBAAkB,CAAC;;;AAGhD,KAAG,CAAC,GAAG,EAAE;WAAM,mBAAM,YAAY,CAAE,UAAC,CAAC;aAAK,CAAC,CAAC,cAAc,CAAC,oBAAoB,CAAC;KAAA,CAAC;GAAA,CAAC,CAAC;AACnF,KAAG,CAAC,GAAG,EAAE;WAAM,mBAAM,YAAY,CAAE,UAAC,CAAC;aAAK,CAAC,CAAC,cAAc,CAAC,kBAAkB,CAAC;KAAA,CAAC;GAAA,CAAC,CAAC;AACjF,KAAG,CAAC,GAAG,EAAE;WAAM,mBAAM,YAAY,CAAE,UAAC,CAAC,EAAK;AAAE,OAAC,CAAC,KAAK,GAAG,CAAC,GAAC,CAAC,CAAC;KAAE,CAAE;GAAA,CAAC,CAAC;;;AAGhE,KAAG,CAAC,OAAO,EAAE;WAAM,mBAAM,mBAAmB,CAAE,UAAC,CAAC,EAAK;AAAE,OAAC,CAAC,cAAc,CAAC,oBAAoB,CAAC;KAAE,CAAC;GAAA,CAAC,CAAC;AAClG,KAAG,CAAC,OAAO,EAAE;WAAM,mBAAM,mBAAmB,CAAE,UAAC,CAAC,EAAK;AAAE,OAAC,CAAC,cAAc,CAAC,kBAAkB,CAAC;KAAE,CAAC;GAAA,CAAC,CAAC;AAChG,KAAG,CAAC,OAAO,EAAE;WAAM,mBAAM,mBAAmB,CAAE,UAAC,CAAC,EAAK;AAAE,OAAC,CAAC,KAAK,GAAG,CAAC,GAAC,CAAC,CAAC;KAAE,CAAE;GAAA,CAAC,CAAC;;;AAG3E,KAAG,CAAC,SAAS,EAAE;WAAM,mBAAM,SAAS,CAAE,UAAC,CAAC,EAAK;AAAE,OAAC,CAAC,cAAc,CAAC,oBAAoB,CAAC;KAAE,CAAC;GAAA,CAAC,CAAC;AAC1F,KAAG,CAAC,SAAS,EAAE;WAAM,mBAAM,SAAS,CAAE,UAAC,CAAC,EAAK;AAAE,OAAC,CAAC,cAAc,CAAC,kBAAkB,CAAC;KAAE,CAAC;GAAA,CAAC,CAAC;AACxF,KAAG,CAAC,SAAS,EAAE;WAAM,mBAAM,SAAS,CAAE,UAAC,CAAC,EAAK;AAAE,OAAC,CAAC,KAAK,GAAG,CAAC,GAAC,CAAC,CAAC;KAAE,CAAE;GAAA,CAAC,CAAC;;;;;AAMnE,KAAG,CAAC,GAAG,EAAE;WAAM,mBAAM,YAAY,CAAE,UAAC,CAAC,EAAK;AAAE,OAAC,CAAC,KAAK,GAAG,CAAC,CAAC;KAAE,CAAC;GAAA,CAAC,CAAC;;;AAG7D,KAAG,CAAC,OAAO,EAAE;WAAM,mBAAM,mBAAmB,CAAE,UAAC,CAAC,EAAK;AAAE,OAAC,CAAC,KAAK,GAAG,CAAC,CAAC;KAAE,CAAC;GAAA,CAAC,CAAC;;;AAGxE,KAAG,CAAC,SAAS,EAAE;WAAM,mBAAM,SAAS,CAAE,UAAC,CAAC,EAAK;AAAE,OAAC,CAAC,KAAK,GAAG,CAAC,CAAC;KAAE,CAAC;GAAA,CAAC,CAAC;;;;AAKhE,KAAG,CAAC,SAAS,EAAE;WAAM,mBAAM,SAAS,EAAE;GAAA,CAAC,CAAC;;AAExC,KAAG,CAAC,SAAS,EAAE,YAAM;AAAE,wBAAO,MAAM,CAAC,OAAO,CAAC,aAAa,GAAG,CAAC,oBAAO,MAAM,CAAC,OAAO,CAAC,aAAa,CAAE,iBAAI,cAAc,EAAE;GAAE,CAAC,CAAC;CAE5H;;AAGD,SAAS,6BAA6B,CAAE,KAAK,EAAC,MAAM,EAAE;gCAC3B,uCAAS,aAAa,CAAC,EAAC,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAC,CAAC;;;;MAA5E,OAAO;MAAE,OAAO;;AACrB,mBAAI,aAAa,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;AACpC,SAAO,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;CAC3B;;qBAEc,YAAY;;;;;ACpI3B,YAAY,CAAC;;;;;;;;;;oBAEU,MAAM;;;;0CACN,8BAA8B;;;;wCAC9B,4BAA4B;;;;;;AAInD,IAAI,EAAE,GAAG,EAAE,CAAC;;AAEZ,SAAS,kBAAkB,CAAC,CAAC,EAAE;AAC7B,MAAI,GAAG,GAAI,CAAC,CAAC,IAAI;MACb,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AAClB,MAAI,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;yBACjC,sCAAK,QAAQ,CAAC,IAAI,CAAC;;;;QAA3B,CAAC;QAAE,CAAC;;AACT,4CAAO,QAAQ,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;GAC3B;CACF;;AAED,SAAS,iBAAiB,CAAC,KAAK,EAAE,MAAM,EAAE;AACxC,MAAI,KAAK,IAAI,MAAM,EAAE;AACnB,SAAK,CAAC,aAAa,GAAG,kBAAkB,CAAC;AACzC,MAAE,GAAG,EAAE,KAAK,EAAL,KAAK,EAAE,MAAM,EAAN,MAAM,EAAE,CAAC;AACvB,4CAAO,OAAO,CAAC,EAAE,CAAC,CAAC;GACpB,MAAM;AACL,UAAM,wCAAwC,CAAC;GAChD;CACF;;AAED,SAAS,aAAa,GAAG;AACvB,oBAAW,SAAS,CAAC,iBAAiB,EAAE,YAAY,CAAC,CAAC;CACvD;;qBAEc,aAAa;;;;;ACjC5B,YAAY,CAAC;;;;;;;AAIb,SAAS,QAAQ,CAAC,IAAI,EAAE;AACtB,MAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,EAAE,CAAC;MACzB,CAAC,GAAG,IAAI,GAAG,EAAE,CAAC;AAClB,SAAO,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;CACf;AACD,SAAS,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE;AACpB,SAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;CACnB;;qBAEc,EAAE,QAAQ,EAAR,QAAQ,EAAE,MAAM,EAAN,MAAM,EAAE;;;;;ACbnC,YAAY,CAAC;;;;;;;;wCAEI,4BAA4B;;;;;;;;;;;;;;AAa7C,SAAS,EAAE,CAAC,EAAE,EAAE,IAAI,EAAE;AACpB,IAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC;CACjC;AACD,SAAS,GAAG,CAAC,EAAE,EAAE,IAAI,EAAE;AACrB,IAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC;CACjC;;AAED,SAAS,KAAK,CAAC,EAAE,EAAE,IAAI,EAAkB;MAAhB,QAAQ,yDAAG,GAAG;;AACrC,IAAE,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;AACb,YAAU,CAAC,YAAM;AAAE,OAAG,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;GAAE,EAAE,QAAQ,CAAC,CAAC;CAChD;;AAED,SAAS,SAAS,CAAC,EAAE,EAAE,GAAG,EAAE;AAC1B,MAAI,SAAS,GAAG,sCAAK,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC;MAC/B,CAAC,GAAG,CAAC,CAAC;AACV,SAAO,CAAC,EAAE,EAAE;AAAE,OAAG,CAAC,EAAE,EAAE,SAAS,GAAG,CAAC,CAAC,CAAC;GAAE;CACxC;;AAED,SAAS,QAAQ,CAAC,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE;AAC9B,MAAI,SAAS,GAAG,sCAAK,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC;MAC/B,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;AAChB,WAAS,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;AACnB,SAAO,CAAC,EAAE,EAAE;AAAE,MAAE,CAAC,EAAE,EAAE,SAAS,GAAG,CAAC,CAAC,CAAC;GAAE;CACvC;;AAED,SAAS,OAAO,CAAC,EAAE,EAAE;AACnB,MAAI,GAAG,GAAG,CAAC,CAAC;AACZ,SAAO,GAAG,EAAE,EAAE;AAAE,aAAS,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;GAAE;CACtC;;qBAGc,EAAE,EAAE,EAAF,EAAE,EAAE,GAAG,EAAH,GAAG,EAAE,KAAK,EAAL,KAAK,EAAE,QAAQ,EAAR,QAAQ,EAAE,SAAS,EAAT,SAAS,EAAE,OAAO,EAAP,OAAO,EAAE;;;;;AC9C/D,YAAY,CAAC;;;;;AAEb,SAAS,YAAY,CAAC,IAAI,EAAE;AAC1B,SAAO,EAAE,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,GAAG,CAAC,CAAC;CACrC;;AAED,SAAS,WAAW,CAAC,IAAI,EAAE;AACzB,SAAO,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;CACzD;;AAED,SAAS,MAAM,CAAC,IAAI,EAAE;AACpB,SAAO,EAAE,WAAW,CAAC,IAAI,CAAC,IAAI,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC;CACnD;;AAED,SAAS,WAAW,CAAC,GAAG,EAAE;AACxB,MAAI,QAAQ,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AACtB,SAAO,QAAQ,KAAK,GAAG,CAAC;CACzB;;qBAEc,EAAE,YAAY,EAAZ,YAAY,EAAE,WAAW,EAAX,WAAW,EAAE,MAAM,EAAN,MAAM,EAAE,WAAW,EAAX,WAAW,EAAE;;;;;ACnBjE,YAAY,CAAC;;;;;;;;oBAEI,MAAM;;;;AAGvB,IAAI,aAAa,GAAG,EAAE,CAAC;;AAEvB,SAAS,gBAAgB,CAAC,CAAC,EAAE;AAC3B,SAAO,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;CAClC;;AAED,SAAS,iBAAiB,GAAG;AAC3B,oBAAK,SAAS,CACZ,UAAS,GAAG,EAAE,GAAG,EAAG;AAClB,OAAG,CAAC,aAAa,GAAG,gBAAgB,CAAC;AACrC,iBAAa,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;GAC7C,EACD,iBAAiB,CAClB,CAAC;CACH;;qBAEc,iBAAiB;;;;;ACrBhC,YAAY;;;;;;;;;;;;qBAEO,OAAO;;;;AAE1B,IAAI,SAAS,GAAG,CAAC;IACb,MAAM,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,CAAE;IAClD,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;;AAEjC,SAAS,CAAC,IAAI,EAAE,CAAC;;;AAGjB,SAAS,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,GAAG,UAAC,QAAQ;SAAK,QAAQ,EAAE;CAAA,CAAC;;IAExD,qBAAqB;AACd,WADP,qBAAqB,CACb,OAAO,EAAE;0BADjB,qBAAqB;;AAEvB,QAAI,OAAO,GAAG,IAAI,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;;AAE7C,WAAO,CAAC,KAAK,GAAG,IAAI,CAAC;AACrB,WAAO,CAAC,KAAK,GAAG,CAAC,GAAC,CAAC,CAAC;AACpB,WAAO,CAAC,UAAU,GAAG,OAAO,CAAC,KAAK,CAAC;AACnC,WAAO,CAAC,OAAO,EAAE,CAAC;;AAElB,QAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AACvB,QAAI,CAAC,WAAW,GAAG,SAAS,CAAC;AAC7B,QAAI,CAAC,EAAE,GAAG,OAAO,CAAC,EAAE,CAAC;;;;;;;;;;;;;GAetB;;eA1BG,qBAAqB;;WAmDX,wBAAC,MAAM,EAAE;AACrB,UAAI,CAAC,OAAO,CAAC,KAAK,IAAI,MAAM,CAAC;AAC7B,yBAAM,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;AAC/C,aAAO,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;KAC3B;;;WAuBS,sBAAG;AACX,UAAI,IAAI,CAAC,WAAW,KAAK,SAAS,EAAE;AAClC,YAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC;AAC/B,YAAI,CAAC,MAAM,GAAG,GAAG,CAAC;OACnB,MACI;AACH,YAAI,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC;AAC/B,YAAI,CAAC,WAAW,GAAG,SAAS,CAAC;OAC9B;KACF;;;SA3DY,aAAC,OAAO,EAAE;AACrB,UAAI,CAAC,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;AAChC,UAAI,CAAC,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;;;;;KAKtC;SAEY,eAAG;AACd,aAAO,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC,CAAC;KAC7D;;;SAGQ,aAAC,KAAK,EAAE;AACf,UAAI,CAAC,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;AAC3B,yBAAM,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC;KACnC;SAEQ,eAAG;AACV,aAAO,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;KAC3B;;;SAUM,aAAC,KAAK,EAAE;AACb,yBAAM,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;AAC3C,UAAI,CAAC,OAAO,CAAC,GAAG,GAAG,KAAK,CAAC;KAC1B;SAEM,eAAG;AACR,aAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;KACzB;;;;;SAGS,aAAC,KAAK,EAAE;AAChB,UAAI,CAAC,GAAG,GAAG,KAAK,CAAC;KAClB;;;SAGS,eAAG;AACX,aAAO,IAAI,CAAC,GAAG,CAAC;KACjB;;;SAaQ,aAAC,KAAK,EAAE;AACf,UAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;;KAE9B;SAEQ,eAAG;AACV,aAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;KAChC;;;SAhGG,qBAAqB;;;AAoG3B,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,UAAC,CAAC,EAAC,CAAC;SAAK,IAAI,qBAAqB,CAAC,EAAC,EAAE,EAAC,CAAC,EAAC,CAAC;CAAA,CAAC,CAAC;;qBAEjD,EAAE,MAAM,EAAN,MAAM,EAAE,UAAU,EAAV,UAAU,EAAE;;;;;ACnHrC,YAAY,CAAC;;;;;;;;yBAEM,YAAY;;;;qBACZ,OAAO;;;;qBACR,OAAO;;;;sBACN,QAAQ;;;;AAE3B,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,sBAAsB,CAAC;IACvD,GAAG,GAAM,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC;IAChC,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,sBAAsB,CAAC;IAC9D,UAAU,GAAG,aAAa,CAAC,UAAU,CAAC,IAAI,CAAC;IAC3C,QAAQ,GAAG,MAAM,CAAC,WAAW,GAAG,CAAC;IACjC,KAAK,GAAG,oBAAO,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC;;AAGxC,SAAS,GAAG,CAAC,CAAC,EAAE;AACd,SAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,QAAQ,EAAE,CAAC,EAAE,MAAM,CAAC,UAAU,GAAG,GAAG,EAAE,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE,CAAC,EAAE,CAAC;CACzF;;AAED,SAAS,YAAY,CAAC,CAAC,EAAE,SAAS,EAAE;AAClC,yBAAO,IAAI,CAAC,GAAG,EAAE,SAAS,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;CAC5C;;AAED,SAAS,gBAAgB,CAAC,CAAC,EAAE,UAAU,EAAE;AACvC,MAAI,CAAC,GAAG,CAAC,GAAG,QAAQ,GAAG,CAAC;MACpB,CAAC,GAAG,MAAM,CAAC,UAAU,GAAG,CAAC,CAAC;AAC9B,KAAG,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;AACjC,KAAG,CAAC,YAAY,GAAG,SAAS,CAAC;AAC7B,KAAG,CAAC,SAAS,GAAM,OAAO,CAAC;AAC3B,KAAG,CAAC,SAAS,GAAM,MAAM,CAAC;AAC1B,KAAG,CAAC,IAAI,GAAW,gBAAgB,CAAC;AACpC,KAAG,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;CAChC;;;AAGD,SAAS,aAAa,CAAC,CAAC,EAAE,MAAM,EAAE;AAChC,MAAI,CAAC,GAAG,MAAM,CAAC,MAAM;MACjB,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC;MACrC,CAAC,GAAG,CAAC,GAAG,QAAQ;MAChB,CAAC,GAAG,EAAE;MACN,CAAC,GAAG,QAAQ;MACZ,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC;MACtB,EAAE,CAAC;;;AAGP,KAAG,CAAC,SAAS,GAAG,OAAO,CAAC;AACxB,KAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,QAAQ,CAAC,CAAC;;AAEzC,KAAG,CAAC,SAAS,GAAG,MAAM,CAAC;;;AAGvB,MAAI,CAAC,IAAI,mBAAM,KAAK,EAClB,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC;;;;AAI1B,KAAG,CAAC,QAAQ,CAAC,CAAC,GAAC,CAAC,EAAE,CAAC,GAAC,EAAE,EAAE,CAAC,GAAC,QAAQ,GAAC,CAAC,CAAC,CAAC;;AAEtC,SAAO,CAAC,EAAE,EAAE;AACV,MAAE,GAAG,CAAC,GAAI,CAAC,GAAG,MAAM,CAAC,CAAC,CAAE,CAAC;AACzB,OAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;AACvC,KAAC,IAAI,EAAE,CAAC;GACT;CACF;;;AAGD,IAAI,WAAW,GAAG,IAAI,GAAG,oBAAO,MAAM,CAAC,OAAO,CAAC,GAAG;IAC9C,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE;IACpC,IAAI,GAAG,SAAS;IAChB,UAAU,GAAG,CAAC,CAAC;;;AAInB,SAAS,cAAc,CAAC,GAAG,EAAE;AAC3B,MAAI,CAAC,oBAAO,MAAM,CAAC,OAAO,CAAC,aAAa,EACtC,OAAO;;;AAGT,uBAAqB,CAAC,cAAc,CAAC,CAAC;;AAEtC,MAAI,OAAO,GAAG,GAAG,GAAG,IAAI,CAAC;;;AAGzB,MAAI,OAAO,GAAG,WAAW,EAAE;;;;AAIzB,QAAI,GAAG,GAAG,GAAI,OAAO,GAAG,WAAY,CAAC;;;AAGrC,cAAU,CAAC,SAAS,GAAG,OAAO,CAAC;AAC/B,uBAAM,iBAAiB,EAAE,CAAC,GAAG,CAAE,UAAC,CAAC;aAAK,aAAa,CAAC,CAAC,CAAC;KAAA,CAAC,CAAC;;;;;;GAOzD;CAEF;;AAED,SAAS,aAAa,CAAC,CAAC,EAAE;AACxB,MAAI,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC;MACb,MAAM,GAAG,mBAAM,IAAI,CAAC,CAAC,CAAC;MACtB,MAAM,GAAG,mBAAM,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;;AAEnC,MAAI,MAAM,CAAC,iBAAiB,KAAK,SAAS,EAAE;AAC1C,cAAU,CAAC,SAAS,CAAC,MAAM,CAAC,iBAAiB,GAAC,CAAC,EAAE,IAAI,CAAC,CAAC,GAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC;GACzE,MACI;;AACH,cAAU,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;GACtD;;AAED,MAAI,MAAM,KAAK,SAAS,EAAE;;AAExB,UAAM,CAAC,UAAU,GAAG,MAAM,CAAC,UAAU,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,EAAC,MAAM,CAAC,UAAU,CAAC,CAAC;;;;AAI3F,QAAI,aAAa,GAAI,GAAG,GAAK,MAAM,GAAC,MAAM,CAAC,UAAU,GAAE,MAAM,CAAC,UAAU,GAAI,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAI,CAAC,CAAC;;AAEjG,cAAU,CAAC,QAAQ,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;AACtD,UAAM,CAAC,KAAK,GAAG,MAAM,CAAC;AACtB,UAAM,CAAC,iBAAiB,GAAG,aAAa,CAAC;GAC1C;CACF;;AAED,SAAS,SAAS,GAAG;AACnB,MAAI,MAAM;MACN,CAAC,GAAG,CAAC,CAAC;AACV,SAAO,CAAC,EAAE,EAAE;AACV,UAAM,GAAG,mBAAM,IAAI,CAAC,CAAC,CAAC,CAAC;AACvB,QAAI,MAAM,CAAC,MAAM,KAAK,SAAS,EAAE;AAC/B,kBAAY,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;KAChC;AACD,QAAI,MAAM,CAAC,UAAU,KAAK,SAAS,EAAE;AACnC,sBAAgB,CAAC,CAAC,EAAE,MAAM,CAAC,UAAU,CAAC,CAAC;KACxC;;;AAGD,iBAAa,CAAC,CAAC,EAAC,MAAM,CAAC,OAAO,CAAC,CAAC;GACjC;CACF;;AAED,SAAS,YAAY,GAAG;AACtB,QAAM,CAAC,KAAK,GAAI,MAAM,CAAC,UAAU,CAAC;AAClC,QAAM,CAAC,MAAM,GAAG,MAAM,CAAC,WAAW,GAAG,CAAC,CAAC;;AAEvC,eAAa,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;AACnC,eAAa,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;CACtC;;AAED,MAAM,CAAC,QAAQ,GAAG,YAAY,CAAC;AAC/B,YAAY,EAAE,CAAC;;AAEf,cAAc,EAAE,CAAC;;qBAEF,EAAE,YAAY,EAAZ,YAAY,EAAE,gBAAgB,EAAhB,gBAAgB,EAAE,aAAa,EAAb,aAAa,EAAE,cAAc,EAAd,cAAc,EAAE,KAAK,EAAL,KAAK,EAAE;;;;;AC9JvF,YAAY,CAAC;;;;;AAEb,IAAI,SAAS,GACT,CAAC,CAAC,EAAE,EAAC,GAAG,EAAC,EAAE,CAAC;AACX,CAAC,EAAE,EAAC,EAAE,EAAC,EAAE,CAAC;AACV,CAAC,CAAC,EAAC,EAAE,EAAC,EAAE,CAAC;AACT,CAAC,GAAG,EAAC,EAAE,EAAC,EAAE,CAAC;AACX,CAAC,GAAG,EAAC,EAAE,EAAC,EAAE,CAAC;AACX,CAAC,GAAG,EAAC,EAAE,EAAC,EAAE,CAAC;AACX,CAAC,GAAG,EAAC,EAAE,EAAC,EAAE,CAAC;AACX,CAAC,EAAE,EAAC,GAAG,EAAC,EAAE,CAAC;CACX,CAAC;;AAEN,SAAS,aAAa,CAAC,GAAG,EAAE,SAAS,EAAE,UAAU,EAAE,KAAK,EAAE;AACxD,MAAI,OAAO,SAAS,KAAK,WAAW,EAAE,OAAO;;AAE7C,MAAI,CAAC,GAAG,SAAS,CAAC,MAAM;MACpB,QAAQ,GAAG,UAAU,CAAC,CAAC,GAAG,CAAC;MAC3B,CAAC;MAAE,CAAC;MAAE,CAAC;MAAC,CAAC;MAAC,CAAC,CAAC;;AAEhB,MAAI,KAAK,CAAC,WAAW,EACnB,OAAO,CAAC,EAAE,EAAE;;;;;;;;;;AAUV,KAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;AACnC,KAAC,GAAG,SAAS,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;AACvC,KAAC,GAAG,SAAS,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;AACvC,OAAG,CAAC,SAAS,YAAU,CAAC,UAAK,CAAC,WAAM,CAAC,OAAI,CAAC;;AAE1C,KAAC,GAAG,UAAU,CAAC,CAAC,CAAC;AACjB,OAAG,CAAC,QAAQ,CAAC,QAAQ,GAAG,CAAC,EAAE,CAAC,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;GACvD,MAED,OAAO,CAAC,EAAE,EAAE;AACV,KAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;AACnC,QAAI,KAAK,CAAC,aAAa,EAAE,CAAC,GAAG,GAAG,GAAC,CAAC,CAAC;AACnC,OAAG,CAAC,SAAS,YAAU,CAAC,UAAK,CAAC,UAAK,CAAC,MAAG,CAAC;;AAExC,KAAC,GAAG,UAAU,CAAC,CAAC,CAAC;AACjB,OAAG,CAAC,QAAQ,CAAC,QAAQ,GAAG,CAAC,EAAE,CAAC,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;GACvD;CAEJ;;AAED,SAAS,IAAI,CAAC,GAAG,EAAE,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE;AAC5C,MAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC;MAC9B,CAAC,GAAG,UAAU,CAAC,CAAC;MAChB,GAAG,CAAC;;AAER,MAAI,CAAC,KAAK,CAAC,aAAa,EAAE;AACxB,OAAG,GAAG,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;AAChC,iBAAa,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,GAAC,CAAC,CAAC,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;GAC7C,MACI;AACH,cAAU,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;;AAErB,WAAO,CAAC,EAAE,EAAE;AACV,SAAG,GAAG,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;AAChC,SAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAC1B,SAAG,CAAC,KAAK,GAAG,CAAC,CAAC;AACd,mBAAa,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,GAAC,CAAC,CAAC,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;KAC7C;GACF;CACF;;qBAEc,EAAE,IAAI,EAAJ,IAAI,EAAE;;;;;ACxEvB,YAAY,CAAC;;;;sBAEM,QAAQ;;;;oCAKG,uBAAuB;;;;gDACvB,oCAAoC;;;;iCACpC,qBAAqB;;;;mCACrB,sBAAsB;;;;oBAQnB,MAAM;;qBAGrB,OAAO;;;;mBACT,KAAK;;;;yCACA,8BAA8B;;;;qBACjC,OAAO;;;;;;;;;;AArBzB,MAAM,CAAC,MAAM,sBAAgB,CAAC;AAC9B,MAAM,CAAC,IAAI,GAAY,oBAAO,IAAI,CAAC;AACnC,MAAM,CAAC,aAAa,GAAG,oBAAO,aAAa,CAAC;;AAM5C,MAAM,CAAC,aAAa,oCAAoB,CAAC;AACzC,MAAM,CAAC,iBAAiB,gDAAoB,CAAC;AAC7C,MAAM,CAAC,UAAU,iCAAoB,CAAC;AACtC,MAAM,CAAC,YAAY,mCAAoB,CAAC;;AAExC,uCAAc,CAAC;;AAGf,MAAM,CAAC,gBAAgB,yBAAmB,CAAC;;AAY3C,IAAI,mBAAM,WAAW,EAAE,EAAE;;;AAGvB,yCAAS,IAAI,EAAE,CAAC;;;AAGhB,MAAI,cAAc,GAAG,mBAAM,iBAAiB,EAAE,CAAC;;;AAG/C,qBAAM,wBAAwB,CAAC,cAAc,CAAC,CAAC;;;AAG/C,gBAAc,CAAC,GAAG,CAAE,UAAC,EAAE,EAAE,CAAC,EAAK;AAAE,2CAAS,QAAQ,CAAC,EAAE,CAAC,CAAE,uCAAS,aAAa,CAAC,EAAC,OAAO,EAAE,EAAE,EAAE,MAAM,EAAE,CAAC,EAAC,CAAC;GAAE,CAAE,CAAC;CAC9G;;;;AC5CD,YAAY,CAAC;;;;;AAEb,IAAI,UAAU,CAAC;;AAEf,SAAS,UAAU,CAAC,OAAO,EAAE,SAAS,EAAE;AACtC,MAAI,MAAM,GAAG,OAAO,CAAC,IAAI,EAAE,CAAC;AAC5B,SAAO,CAAC,MAAM,CAAC,IAAI,EAAE;AACnB,QAAI,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;AAAE,aAAO,MAAM,CAAC,KAAK,CAAC;KAAE;AAC/D,UAAM,GAAG,OAAO,CAAC,IAAI,EAAE,CAAC;GACzB;CACF;;;;;AAKD,SAAS,SAAS,CAAC,EAAE,EAAE,SAAS,EAAE;AAChC,WAAS,CAAC,iBAAiB,EAAE,CAAC,IAAI,CAChC,UAAC,UAAU,EAAK;AACd,QAAI,MAAM,GAAI,UAAU,CAAC,MAAM,CAAC,MAAM,EAAE;QACpC,OAAO,GAAG,UAAU,CAAC,OAAO,CAAC,MAAM,EAAE;QACrC,KAAK,GAAK,UAAU,CAAC,MAAM,EAAE,SAAS,CAAC;QACvC,MAAM,GAAI,UAAU,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;AAC7C,MAAE,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;GACnB,EACD,YAAO;AAAE,WAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;GAAE,CACtD,CAAC;CACH;;qBAEc,EAAE,SAAS,EAAT,SAAS,EAAE;;;;;AC5B5B,YAAY,CAAC;;;;;;;;;;;;qBAEK,OAAO;;;;AAEzB,IAAI,SAAS,GAAG,CAAC;IACb,mBAAmB,GAAI,MAAM,CAAC,YAAY,IAAI,MAAM,CAAC,kBAAmB;IACxE,QAAQ,GAAK,IAAI,mBAAmB,EAAE;IACtC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC;IAC5B,MAAM,GAAO,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,CAAC,CAAC;;IAGpD,cAAc;AACP,WADP,cAAc,CACN,OAAO,EAAE;0BADjB,cAAc;;;AAGhB,QAAI,CAAC,EAAE,GAAG,OAAO,CAAC,EAAE,CAAC;AACrB,QAAI,MAAM,GAAG,QAAQ,CAAC,kBAAkB,EAAE;QACtC,MAAM,GAAG,QAAQ,CAAC,YAAY,CAAC,CAAC,EAAE,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,CAAC;AACvE,QAAI,WAAW,GAAG,SAAS,CAAC;AAC5B,QAAI,CAAC,QAAQ,GAAG;AACd,UAAI,EAAG,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC;AAC/B,WAAK,EAAE,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC;KAChC,CAAC;AACF,QAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACrB,QAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,UAAU,EAAE,CAAC;AAClC,UAAM,CAAC,YAAY,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC;AAClC,UAAM,CAAC,IAAI,GAAK,IAAI,CAAC;AACrB,UAAM,CAAC,MAAM,GAAG,MAAM,CAAC;AACvB,UAAM,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC1B,QAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;AACxC,UAAM,CAAC,KAAK,EAAE,CAAC;GAChB;;eAnBG,cAAc;;WAmDJ,wBAAC,MAAM,EAAE;AACrB,UAAI,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC;AAC1C,UAAI,IAAI,MAAM,CAAC;;;AAGf,UAAI,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,GAAG,IAAI,CAAC;AACtC,yBAAM,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC;AACjC,aAAO,IAAI,CAAC;KACb;;;;;WAqBS,sBAAG;AACX,UAAI,IAAI,CAAC,WAAW,KAAK,SAAS,EAAE;AAClC,YAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;AACxC,YAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;OAC5B,MACI;AACH,YAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC;AACxC,YAAI,CAAC,WAAW,GAAG,SAAS,CAAC;OAC9B;KACF;;;;;SApEY,aAAC,OAAO,EAAE;AACrB,UAAI,SAAS,GAAG,OAAO,CAAC,MAAM;UAC1B,IAAI,GAAI,IAAI,CAAC,QAAQ,CAAC,IAAI;UAC1B,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK;UAC3B,GAAG;UAAE,CAAC,CAAC;;;;AAIX,WAAK,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC3C,YAAI,CAAC,CAAC,CAAC,GAAI,OAAO,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC;AAClC,aAAK,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC;OACnC;KACF;SACY,eAAG;AACd,aAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;KAClD;;;;;SAIQ,aAAC,KAAK,EAAE;AACf,UAAI,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,GAAG,KAAK,CAAC;AACvC,yBAAM,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC;KACnC;;;SAGQ,eAAG;AACV,aAAO,IAAI,CAAC,MAAM,CAAC,YAAY;KAChC;;;SAcM,aAAC,KAAK,EAAE;AACb,UAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,yBAAM,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,KAAK,CAAC;KACjC;;;SAGM,eAAG;AACR,aAAO,IAAI,CAAC,MAAM,CAAC;KACpB;;;SAGS,aAAC,KAAK,EAAE;AAChB,UAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KAC9B;SACS,eAAG;AACX,aAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;KAC7B;;;SAcQ,aAAC,KAAK,EAAE,EAChB;SACQ,eAAG;AACV,aAAO,CAAC,CAAC;KACV;;;SAhGG,cAAc;;;AAmGpB,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,UAAC,CAAC,EAAC,CAAC;SAAK,IAAI,cAAc,CAAC,EAAC,EAAE,EAAC,CAAC,EAAC,CAAC;CAAA,CAAC,CAAC;;qBAE1C,EAAE,MAAM,EAAN,MAAM,EAAE,UAAU,EAAV,UAAU,EAAE;;;;;AChHrC,YAAY,CAAC;;;;;;;;qBAEK,OAAO;;;;mBACP,KAAK;;;;qBACL,OAAO;;;;sBACN,QAAQ;;;;AAE3B,IAAI,iBAAiB,GAAG,EAAE;IACtB,OAAO,GAAG,EAAE,CAAC;;AAEjB,SAAS,iBAAiB,CAAC,CAAC,EAAE,IAAI,EAAE;AAClC,MAAI,MAAM,GAAM,IAAI,CAAC,MAAM;MACvB,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AAC1C,qBAAM,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;AACpB,qBAAM,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,SAAS,CAAC;;AAEtC,MAAI,oBAAO,MAAM,CAAC,KAAK,CAAC,qBAAqB,EAAE;AAC7C,uBAAM,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;AACxB,uBAAM,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;GAC3B;;AAED,mBAAI,gBAAgB,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;AACzC,mBAAI,YAAY,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;CAC7B;;AAED,SAAS,WAAW,CAAC,CAAC,EAAE,EAAE,EAAE;AAC1B,MAAI,OAAO,CAAC,CAAC,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE;AACtC,WAAO,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;GACxB;AACD,SAAO,CAAC,CAAC,CAAC,GAAG,IAAI,MAAM,CAAC,kBAAkB,CAAC,CAAC;AAC5C,SAAO,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,EAAE,CAAC;CAC3B;;AAED,SAAS,IAAI,CAAC,CAAC,EAAE,OAAO,EAAE,UAAU,EAAE;AACpC,MAAI,EAAE;MACF,IAAI,GAAG,EAAE,OAAO,EAAP,OAAO,EAAE,UAAU,EAAV,UAAU,EAAE,CAAC;AACnC,IAAE,GAAG,UAAS,CAAC,EAAE;AACf,QAAI,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC;AACrB,qBAAiB,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;GAC5B,CAAC;AACF,aAAW,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;AACnB,SAAO,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC;CAC/C;;AAED,SAAS,aAAa,CAAC,CAAC,EAAE,OAAO,EAAE,UAAU,EAAiB;MAAf,OAAO,yDAAG,GAAG;;AAC1D,cAAY,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;AACnC,mBAAiB,CAAC,CAAC,CAAC,GAAG,UAAU,CAC/B;WAAM,IAAI,CAAC,CAAC,EAAE,OAAO,EAAE,UAAU,CAAC;GAAA,EAClC,OAAO,CACR,CAAC;CACH;;AAED,SAAS,UAAU,CAAC,CAAC,EAAE;AACrB,qBAAM,MAAM,CAAC,CAAC,CAAC,CAAC,UAAU,EAAE,CAAC;CAC9B;;AAED,SAAS,MAAM,CAAC,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE;AACjC,MAAI,GAAG,GAAG,mBAAM,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;;AAEjC,MAAI,OAAO,EACT,GAAG,GAAG,GAAG,GAAG,KAAK,CAAC,KAElB,GAAG,GAAG,KAAK,CAAC;;AAEd,MAAI,GAAG,GAAG,GAAG,EACX,GAAG,GAAG,CAAC,CAAC;AACV,MAAI,GAAG,GAAG,IAAI,EACZ,GAAG,GAAG,IAAI,CAAC;;AAEb,qBAAM,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,GAAG,CAAC;CAC9B;;AAED,SAAS,cAAc,CAAC,CAAC,EAAE,MAAM,EAAE;AACjC,qBAAM,MAAM,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;CACxC;;qBAEc,EAAE,IAAI,EAAJ,IAAI,EAAE,aAAa,EAAb,aAAa,EAAE,MAAM,EAAN,MAAM,EAAE,UAAU,EAAV,UAAU,EAAE,cAAc,EAAd,cAAc,EAAE;;;;;AC5E1E,YAAY,CAAC;;;;;AAEb,IAAI,KAAK,GAAG,EAAE;IACV,KAAK,GAAG,SAAS;IACjB,MAAM,GAAG,SAAS,CAAC;;AAEvB,SAAS,IAAI,CAAC,CAAC,EAAE,IAAI,EAAE;AACrB,OAAK,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;CAC9C;;AAED,SAAS,IAAI,CAAC,CAAC,EAAE;AACf,SAAO,KAAK,CAAC,CAAC,CAAC,IAAI,EAAE,UAAU,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,GAAG,EAAC,GAAG,EAAC,GAAG,EAAC,GAAG,CAAC,EAAE,UAAU,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAC,CAAC,CAAC,EAAE,KAAK,EAAC,SAAS,EAAE,iBAAiB,EAAC,SAAS,EAAE,CAAC;CAC3I;;AAED,SAAS,MAAM,GAAG;;AAEhB,MAAI,QAAQ,GAAG,CAAC,YAAY,EAAE,SAAS,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;AAClE,SAAO,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;CACxC;;AAED,SAAS,WAAW,CAAC,IAAI,EAAE;AACzB,OAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;CAC1B;;;AAGD,SAAS,SAAS,GAAG;AACnB,MAAI,IAAI,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,CAAC;;;;;;;;;;AAU/B,QAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,SAAS,GAAC,IAAI,CAAC;AACtC,SAAO,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC;CAC7B;;;AAID,SAAS,WAAW,CAAC,GAAG,EAAE;AACxB,MAAI,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC;AACtC,MAAI,IAAI,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9C,MAAI,IAAI,KAAK,SAAS,EAAE;AACtB,eAAW,CAAC,IAAI,CAAC,CAAC;;AAElB,SAAK,CAAC,OAAO,CAAE,UAAC,CAAC,EAAK;AAAE,UAAI,CAAC,IAAI,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,UAAU,EAAE,CAAC,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,CAAC,UAAU,CAAC;KAAE,CAAE,CAAC;AACxH,WAAO,IAAI,CAAC;GACb,MACI;AACH,WAAO,KAAK,CAAC;GACd;CACF;;AAED,SAAS,YAAY,CAAC,CAAC,EAAE;AACvB,QAAM,GAAG,MAAM,CAAC,MAAM,CAAE,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AACtC,QAAM,CAAC,KAAK,GAAG,MAAM,CAAC,iBAAiB,GAAG,SAAS,CAAC;CACrD;;AAED,SAAS,cAAc,CAAC,CAAC,EAAE;AACzB,MAAI,CAAC,MAAM,EAAE,OAAO,KAAK,CAAC;AAC1B,OAAK,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC;AAClB,OAAK,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAC3C,SAAO,KAAK,CAAC,CAAC,CAAC,CAAC;CACjB;;AAED,SAAS,iBAAiB,GAAG;AAC3B,MAAI,MAAM,GAAG,EAAE,CAAC;AAChB,OAAK,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,GAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACjC,QAAI,KAAK,CAAC,CAAC,CAAC,EAAE;AACZ,YAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;KAChB;GACF;AACD,SAAO,MAAM,CAAC;CACf;;qBAGc,EAAE,IAAI,EAAJ,IAAI,EAAE,IAAI,EAAJ,IAAI,EAAE,KAAK,EAAL,KAAK,EAAE,YAAY,EAAZ,YAAY,EAAE,cAAc,EAAd,cAAc,EAAE,MAAM,EAAN,MAAM,EAAE,WAAW,EAAX,WAAW,EAAE,SAAS,EAAT,SAAS,EAAE,WAAW,EAAX,WAAW,EAAE,iBAAiB,EAAjB,iBAAiB,EAAC","file":"public/main.js","sourcesContent":["'use strict';\n\n//import {synths,numSamples} from 'native-audio';\nimport {synths,numSamples} from 'gibberish-audio';\n\nimport state from 'state';\n\n\nfunction loadSynthParamsFromState(ids = [], params = [\"amp\",\"pitch\",\"phase\"]) {\n  ids.map( (id) => {\n    var stateI = state.load(id),\n\tsynthI = synths[id];\n\n    params.forEach( (param,i) => {\n      if (stateI[param]) synthI[param] = stateI[param];\n    });    \n  });\n}\n\nfunction synth(i, fn) {\n  return fn(synths[i]);\n}\n\nfunction focusedSynth(fn) {\n  return fn(synths[state.focus]);\n}\n\nfunction allSynths(fn) {\n  return synths.map( (s,i) => fn(s) );\n}\n\nfunction allSynthsButFocused(fn) {\n  return synths.map( (s,i) => { if (s.id != state.focus) fn(s); } );\n}\n\nexport default { synths, numSamples, loadSynthParamsFromState, focusedSynth, allSynths, allSynthsButFocused };\n","'use strict'\n\nvar params = {\n  VISUALS: {\n    STYLE: {\n      withColours: true,\n      invertColours: false,\n      drawAllLevels: true\n    },\n    drawScanLines: true,\n    FPS: 40\n  },\n\n  AUDIO: {\n    resetPhaseOnNewBuffer: false\n  }\n}\n\nvar original = {\n  VISUALS: {\n    STYLE: {\n      withColours: false,\n      invertColours: false,\n      drawAllLevels: true\n    },\n    drawScanLines: false,\n    FPS: 60\n  },\n\n  AUDIO: {\n    resetPhaseOnNewBuffer: true\n  }\n}\n\nexport default { params };\n","'use strict';\n\nimport midiAccess from 'midi';\nimport message    from 'controllers/cmd-lc1/message';\nimport controls   from 'controllers/cmd-lc1/controls';\nimport lights     from 'controllers/cmd-lc1/lights';\nimport player     from 'player';\nimport state      from 'state';\nimport gui        from 'gui';\n\nvar lc;\n\nfunction handleEncoder(msg) {\n  var val = message.fromEncoder(msg),\n      [i, pat] = controls.adjustPattern(val);\n  lights.forPattern(lc, pat);\n  gui.updateSliders(i, pat);\n}\n\nfunction handleIterationMessage(msg) {\n  var itr = msg[1] - 31;\n  controls.setIterations(itr);\n  lights.forIterations(lc, itr);\n}\n\nfunction handleQuietenMessage(msg) {\n  var i = msg[1] - 48,\n      st = state.load(i),\n      pat = st.pattern.map((e) => e * 0.95);\n  st.pattern = pat;\n  state.save(i, st);\n  player.playDebounced(i, st.pattern, st.iterations, 150);\n  lights.forPattern(lc, pat);\n  gui.updateSliders(i, pat);\n}\n\nfunction handleFocusChange(msg) {\n  var num = message.fromNumber(msg),\n      sta = state.load(num),\n      pat = sta.pattern,\n      itr = sta.iterations;\n  controls.setFocus(num);\n  lights.forFocus(lc, num);\n  lights.forIterations(lc, itr);\n  lights.forPattern(lc, pat);\n}\n\nfunction recieveMIDIMessage(e) {\n  var msg = e.data;\n  if (message.isEncoder(msg)) {\n    handleEncoder(msg);\n\n  } else if (message.isNumberOn(msg)) {\n    handleFocusChange(msg);\n\n  } else if (message.isGridOn(msg)) {\n    if(msg[1] < 48) {\n      handleIterationMessage(msg);\n    } else {\n      handleQuietenMessage(msg);\n    }\n  }\n}\n\nfunction registerCMDLC1(input, output) {\n  if (input && output) {\n    input.onmidimessage = recieveMIDIMessage;\n    lc = { input, output };\n    lights.forIterations(lc, 8);\n    lights.forFocus(lc, 0);\n  } else {\n    throw 'ERROR: Launchpad MIDI device not found';\n  }\n}\n\nfunction initCMDLC1() {\n  midiAccess.getDevice(registerCMDLC1, /^CMD LC-1$/);\n  controls.init();\n}\n\nexport default initCMDLC1;\n","'use strict';\n\nimport player from 'player';\nimport state  from 'state';\nimport gui    from 'gui';\n\nvar MAXITERATIONS = 8;\nvar MINITERATIONS = 1;\n    \nvar focused  = 0,\n    stepSize = 0.03,\n    controls = [];\n\nfunction save(i, data) {\n  controls[i] = data;\n}\n\nfunction load(i) {\n  return controls[i];\n}\n\n\nfunction init() {\n  var i = 8;\n\n  // initialise the default focus first\n  controls[focused] = state.load(focused);\n  setFocus(focused);\n\n  while (i--) { controls[i] = state.load(i); setFocus(i); }\n}\n\nfunction setFocus(i) {\n  //  console.log(`Focused ${i}`);\n  \n  var oldfocus = focused;\n  \n  focused = i;\n  state.focus = focused;\n\n  // console.log(oldfocus, controls[oldfocus].pattern);\n  // console.log(focused,controls[focused].pattern);\n  \n  gui.updateSliders(oldfocus,controls[oldfocus].pattern);\n  gui.updateSliders(focused,controls[focused].pattern);\n  \n}\n\n// Takes an encoder object { encoder: index, change: (1|-1) }\n// and increments or decrements the matching pattern segment\n//\nfunction adjustPattern(msg) {\n  var ctr = controls[focused],\n      pattern = ctr.pattern,\n      val;\n  if (pattern[msg.encoder] !== undefined) {\n    val = pattern[msg.encoder] + stepSize * msg.change;\n    val = Math.min(1, val);\n    val = Math.max(0, val);\n    pattern[msg.encoder] = val;\n  }\n  player.playDebounced(focused, ctr.pattern, ctr.iterations, 200);\n\n\n  return [focused, pattern];\n}\n\nfunction restartFocused() {\n  adjustPattern({encoder: focused, change: 0});\n}\n\nfunction invertFocusedPattern() {\n  var ctr = controls[focused],\n      pattern = ctr.pattern;\n\n  ctr.pattern = pattern.map((v) => 1.0 - v);\n  state.load(focused).pattern = pattern;\n\n  gui.updateSliders(focused,ctr.pattern);\n  restartFocused();\n}\n\nfunction resetFocusedPattern() {\n  var ctr = controls[focused],\n      pattern = ctr.pattern;\n  \n  ctr.pattern = [0.5,0.5,0.5,0.5];\n  state.load(focused).pattern = pattern;\n\n  gui.updateSliders(focused,ctr.pattern);\n  restartFocused();  \n}\n\nfunction setIterations(itr, isdelta) {\n  var s = state.load(focused);\n  s.iterations = isdelta ? s.iterations + itr : itr;\n  if (s.iterations > MAXITERATIONS) s.iterations = MAXITERATIONS;\n  if (s.iterations < MINITERATIONS) s.iterations = MINITERATIONS;\n  //FIXME: hacky\n  s.numSamples = Math.pow(s.pattern.length, s.iterations);\n  state.save(focused, s);\n  controls[focused].iterations = s.iterations;\n  gui.updateIterations(focused, s.iterations);\n}\n\n\n\nexport default { init, load, save, setFocus, adjustPattern, resetFocusedPattern, invertFocusedPattern, restartFocused, setIterations,  };\n","'use strict';\n\nimport message from 'controllers/cmd-lc1/message';\n\nfunction on(lc, note) {\n  lc.output.send([144, note, 3]);\n}\nfunction off(lc, note) {\n  lc.output.send([144, note, 127]);\n}\n\nfunction numBlue(lc, note) {\n  lc.output.send([144, note, 1]);\n}\nfunction numOrange(lc, note) {\n  lc.output.send([144, note, 0]);\n}\n\nfunction forIterations(lc, itr) {\n  var i = 16;\n  while (i--) {\n    off(lc, i + 32);\n  }\n  while (itr--) {\n    on(lc, itr + 32);\n  }\n}\n\nfunction forFocus(lc, n) {\n  var i = 8;\n  while (i--) {\n    numOrange(lc, i + 16);\n  }\n  numBlue(lc, message.toNumber(n));\n}\n\nfunction forPattern(lc, pattern) {\n  var i = 8,\n      val, numLights;\n  while (i--) {\n    val = pattern[i];\n    if (val !== undefined) {\n      numLights = Math.ceil(15 * val);\n      lc.output.send([176, i + 16, numLights]);\n    }\n  }\n  window.f = function(x, y, z) { lc.output.send([x, y, z]); };\n}\n\nexport default { forIterations, forFocus, forPattern };\n","'use strict';\n\nfunction isOn(msg) {\n  return msg[0] === 144 && msg[2] === 127;\n}\n\nfunction isEncoder(msg) {\n  var x = msg[0],\n      y = msg[1];\n  return x === 176 && (y >= 16 || y <= 23);\n}\n\nfunction fromEncoder(msg) {\n  var encoder = msg[1] - 16,\n      change  = msg[2] - 64;\n  return { encoder, change };\n}\n\n\nfunction isNumberOn(msg) {\n  var y = msg[1];\n  return isOn(msg) && y >= 16 && y <= 23;\n}\n\nfunction fromNumber(msg) {\n  return msg[1] - 16;\n}\n\nfunction toNumber(n) {\n  return n + 16;\n}\n\n\nfunction isRecOn(msg) {\n  var y = msg[1];\n  return isOn(msg) && y >= 72 && y <= 75;\n}\n\nfunction fromRecOn(msg) {\n  return msg[1] - 16;\n}\n\n\nfunction isGridOn(msg) {\n  var y = msg[1];\n  return isOn(msg) && y >= 32 && y <= 63;\n}\n\n\nfunction gridNoteFromXY([x, y]) {\n  y = Math.abs((y - 15) * 4);\n  return y + x;\n}\nfunction fromGrid(msg) {\n  var a = msg[1],\n      x = a % 4,\n      y = Math.abs(Math.floor(a / 4) - 15);\n  return [x, y];\n}\n\n\nexport default {\n  isEncoder,      fromEncoder,\n  isNumberOn,     fromNumber,  toNumber,\n  isRecOn,        fromRecOn,\n  isGridOn,       fromGrid,\n  gridNoteFromXY,\n};\n","import controls   from 'controllers/cmd-lc1/controls';\nimport gui    from 'gui';\nimport state  from 'state';\nimport player from 'player';\nimport audio from 'audio'\nimport config from 'config'\n\nfunction initKeyboard() {\n\n  controls.init();\n  \n  // Focus on a generator\n  key('1', () => controls.setFocus(0));\n  key('2', () => controls.setFocus(1));\n  key('3', () => controls.setFocus(2));\n  key('4', () => controls.setFocus(3));\n  key('5', () => controls.setFocus(4));\n  key('6', () => controls.setFocus(5));\n  key('7', () => controls.setFocus(6));\n  key('8', () => controls.setFocus(7)); \n\n  // or move the focus with the arrow keys  \n  key('up', () => controls.setFocus((state.focus - 1 + 8)  % 8));\n  key('down', () => controls.setFocus((state.focus + 1) % 8));\n\n  \n  // increase/decrease the first slider\n  key('q', () => adjustPatternAndUpdateSliders(0, 1) );\n  key('a', () => adjustPatternAndUpdateSliders(0, -1));\n\n  // increase/decrease the second slider\n  key('w', () => adjustPatternAndUpdateSliders(1, 1) );\n  key('s', () => adjustPatternAndUpdateSliders(1, -1));\n\n  // increase/decrease the third slider\n  key('e', () => adjustPatternAndUpdateSliders(2, 1) );\n  key('d', () => adjustPatternAndUpdateSliders(2, -1));\n\n  // increase/decrease the forth slider\n  key('r', () => adjustPatternAndUpdateSliders(3, 1) );\n  key('f', () => adjustPatternAndUpdateSliders(3, -1));\n\n  // increase/decrease the fifth slider\n  key('t', () => adjustPatternAndUpdateSliders(4, 1) );\n  key('g', () => adjustPatternAndUpdateSliders(4, -1));\n\n  \n  // copy the state & sliders of the focused generator\n  key('c', () => state.copytobuffer(state.focus));\n\n  // paste the copied state & slider settings into the newly focused generator\n  key('v', () => { var saved = state.savefrombuffer(state.focus);\n\t\t   if (!saved) return;\n\t\t   controls.save(state.focus, saved);\n\t\t   audio.loadSynthParamsFromState([state.focus]);\n\t\t   adjustPatternAndUpdateSliders(state.focus, /*force-redraw*/0 ) });\n\n  key('x', () => controls.resetFocusedPattern() );\n\n  key('i', () => controls.invertFocusedPattern() );\n  \n  \n  key('[', () => { controls.setIterations(-1, /*isdelta*/true); controls.restartFocused() });\n  key(']', () => { controls.setIterations(1,  /*isdelta*/true); controls.restartFocused() });\n\n\n  /* VOLUME */\n\n  // control the volume of the focused generator\n  key('-', () => player.volume(state.focus, -0.1, true));\n  key('=', () => player.volume(state.focus, 0.1, true));\n  key('0', () => player.togglemute(state.focus));\n\n  // control the volume of all but the focused generator\n  key('alt+-', () => audio.allSynthsButFocused( (s) => { player.volume(s.id, -0.1, true); }));\n  key('alt+=', () => audio.allSynthsButFocused( (s) => { player.volume(s.id, 0.1, true); }));\n  key('alt+0', () => audio.allSynthsButFocused( (s) => { player.togglemute(s.id); }));\n\n  // control the volume of all generators\n  key('shift+-', () => audio.allSynths( (s) => { player.volume(s.id, -0.1, true); }));\n  key('shift+=', () => audio.allSynths( (s) => { player.volume(s.id, 0.1, true); }));\n  key('shift+0', () => audio.allSynths( (s) => { player.togglemute(s.id); }));\n  \n\n  /* PITCH (PLAYRATE) */\n  \n  var PLAYRATE_UP_FACTOR = Math.sqrt(2),\n      PLAYRATE_DOWN_FACTOR = 1/PLAYRATE_UP_FACTOR;\n\n  // control the pitch (playrate) of the focused generator\n  key(',', () => audio.focusedSynth( (s) => s.playRatechange(PLAYRATE_DOWN_FACTOR)));\n  key('.', () => audio.focusedSynth( (s) => s.playRatechange(PLAYRATE_UP_FACTOR)));\n  key('m', () => audio.focusedSynth( (s) => { s.pitch = 1/8; } ));\n\n  // control the pitch (playrate) of all but the focused generator\n  key('alt+,', () => audio.allSynthsButFocused( (s) => { s.playRatechange(PLAYRATE_DOWN_FACTOR) }));\n  key('alt+.', () => audio.allSynthsButFocused( (s) => { s.playRatechange(PLAYRATE_UP_FACTOR) }));\n  key('alt+m', () => audio.allSynthsButFocused( (s) => { s.pitch = 1/8; } ));\n\n  // control the pitch (playrate) of all generators\n  key('shift+,', () => audio.allSynths( (s) => { s.playRatechange(PLAYRATE_DOWN_FACTOR) }));\n  key('shift+.', () => audio.allSynths( (s) => { s.playRatechange(PLAYRATE_UP_FACTOR) }));\n  key('shift+m', () => audio.allSynths( (s) => { s.pitch = 1/8; } ));\n\n  \n  /* PHASE */\n\n  // control the phase of the focused generator\n  key('p', () => audio.focusedSynth( (s) => { s.phase = 0; }));\n  \n  // control the phase of all but the focused generator\n  key('alt+p', () => audio.allSynthsButFocused( (s) => { s.phase = 0; }));\n  \n  // control the phase of all generators\n  key('shift+p', () => audio.allSynths( (s) => { s.phase = 0; }));\n\n\n  /* MISC */\n\n  key('shift+s', () => state.saveToURL()); // state -> url\n\n  key('shift+l', () => { config.params.VISUALS.drawScanLines = !config.params.VISUALS.drawScanLines; gui.updateScanners() });\n  \n}\n\n\nfunction adjustPatternAndUpdateSliders (index,change) {\n  var [focused, pattern] = controls.adjustPattern({encoder: index, change: change});\n  gui.updateSliders(focused, pattern);\n  return [focused, pattern];\n}\n\nexport default initKeyboard;\n","'use strict';\n\nimport midiAccess from 'midi';\nimport lights     from 'controllers/launchpad/lights';\nimport grid       from 'controllers/launchpad/grid';\n\n// Use the launchpad rotated 90 degrees anticlockwise\n\nvar lp = {};\n\nfunction recieveMIDIMessage(e) {\n  var msg  = e.data,\n      note = msg[1];\n  if (note.isOnMessage(msg) && note.isGrid(note)) {\n    var [x, y] = grid.fromNote(note);\n    lights.columnOn(lp, x, y);\n  }\n}\n\nfunction registerLaunchpad(input, output) {\n  if (input && output) {\n    input.onmidimessage = recieveMIDIMessage;\n    lp = { input, output };\n    lights.gridOff(lp);\n  } else {\n    throw 'ERROR: Launchpad MIDI device not found';\n  }\n}\n\nfunction initLaunchpad() {\n  midiAccess.getDevice(registerLaunchpad, /^Launchpad/);\n}\n\nexport default initLaunchpad;\n","'use strict';\n\n// Grid starts bottom left\n\nfunction fromNote(note) {\n  var x = Math.floor(note / 16),\n      y = note % 16;\n  return [x, y];\n}\nfunction toNote(x, y) {\n  return x * 16 + y;\n}\n\nexport default { fromNote, toNote };\n","'use strict';\n\nimport grid from 'controllers/launchpad/grid';\n\n// Decimal Colour Brightness\n// 12      Off    Off\n// 13      Red    Low\n// 15      Red    Full\n// 29      Amber  Low\n// 63      Amber  Full\n// 62      Yellow Full\n// 28      Green  Low\n// 60      Green  Full\n\n\nfunction on(lp, note) {\n  lp.output.send([144, note, 63]);\n}\nfunction off(lp, note) {\n  lp.output.send([144, note, 12]);\n}\n\nfunction flash(lp, note, duration = 500) {\n  on(lp, note);\n  setTimeout(() => { off(lp, note); }, duration);\n}\n\nfunction columnOff(lp, col) {\n  var colOffset = grid.toNote(col, 0),\n      i = 8;\n  while (i--) { off(lp, colOffset + i); }\n}\n\nfunction columnOn(lp, col, num) {\n  var colOffset = grid.toNote(col, 0),\n      i = num + 1;\n  columnOff(lp, col);\n  while (i--) { on(lp, colOffset + i); }\n}\n\nfunction gridOff(lp) {\n  var col = 8;\n  while (col--) { columnOff(lp, col); }\n}\n\n\nexport default { on, off, flash, columnOn, columnOff, gridOff };\n","'use strict';\n\nfunction isSideButton(note) {\n  return !(note <= 104 || note > 111);\n}\n\nfunction isTopButton(note) {\n  return [8, 24, 40, 56, 72, 88, 104, 120].includes(note);\n}\n\nfunction isGrid(note) {\n  return !(isTopButton(note) || isSideButton(note));\n}\n\nfunction isOnMessage(msg) {\n  var velocity = msg[2];\n  return velocity === 127;\n}\n\nexport default { isSideButton, isTopButton, isGrid, isOnMessage };\n","'use strict';\n\nimport midi from 'midi';\n\n\nvar launchControl = {};\n\nfunction printMidiMessage(e) {\n  console.log('Got MIDI:', e.data);\n}\n\nfunction initLaunchControl() {\n  midi.getDevice(\n    function(inp, out)  {\n      inp.onmidimessage = printMidiMessage;\n      launchControl = { input: inp, output: out };\n    },\n    /^Launch Control/\n  );\n}\n\nexport default initLaunchControl;\n","'use strict'\n\nimport state  from 'state';\n\nvar numSynths = 8,\n    synths = Array.apply(null, { length: numSynths } ),\n    numSamples = Math.pow(2, 19); \n\nGibberish.init();\n\n// First, let's extend the GibberishSampler to run a callback when we want\nGibberish.Sampler.prototype.ontick = (callback) => callback();\n\nclass GibberishSamplerSynth {\n  constructor(options) {\n    var sampler = new Gibberish.Sampler(options);\n    \n    sampler.loops = true;\n    sampler.pitch = 1/8;\n    sampler.playOnLoad = sampler.pitch;\n    sampler.connect();\n\n    this.sampler = sampler;\n    this.mutedvolume = undefined;\n    this.id = sampler.id;\n\n    \n    // a little hacky, but this is what Gibberish gives us\n    // Disabled because it turns out we can meaningfully poll the phase via requestAnimationFrame\n    // var sequencer = new Gibberish.Sequencer({\n    //   target:sampler,    // attach to the sampler, \n    //   key:'ontick',      // ... and invoke its ontick method\n    //   durations:[100], // ... every this many samples\n    //   values: [ () => { return () => { state.load(sampler.id).phase = sampler.getPhase(); } } ], // ... with a function that returns a function which the ontick method will invoke\n    //   shouldKeepOffset: true //TODO should i keep this?\n    // });\n    \n    // this.sequencer = sequencer;\n    \n  }\n\n  set wavetable(samples) {\n    this.sampler.setBuffer(samples);\n    this.sampler.length = samples.length;\n    //this.sampler.note(this.sampler.pitch);\n\n    // if (!this.sequencer.isRunning)\n    //   this.sequencer.start();\n  }\n\n  get wavetable() {\n    return [this.sampler.getBuffer(), this.sampler.getBuffer()];\n  }\n\n\n  set pitch(pitch) {\n    this.sampler.pitch = pitch;\n    state.load(this.id).pitch = pitch;\n  }\n\n  get pitch() {\n    return this.sampler.pitch;\n  }\n  \n  playRatechange(factor) {\n    this.sampler.pitch *= factor;\n    state.load(this.id).pitch = this.sampler.pitch;\n    return this.sampler.pitch;\n  }\n\n\n\n  set amp(value) {\n    state.load(this.id).amp = this.sampler.amp;\n    this.sampler.amp = value;\n  }\n\n  get amp() {\n    return this.sampler.amp;\n  }\n\n  // backwards compatibility\n  set volume(value) {\n    this.amp = value;\n  }\n  \n  // backwards compatibility\n  get volume() {\n    return this.amp;\n  }\n\n  togglemute() {\n    if (this.mutedvolume === undefined) {\n      this.mutedvolume = this.volume;\n      this.volume = 0.0;\n    }\n    else {\n      this.volume = this.mutedvolume;\n      this.mutedvolume = undefined;\n    }      \n  }\n\n  set phase(phase) {\n    this.sampler.setPhase(phase);\n//    state.load(this.id).phase = this.sampler.phase;\n  }\n    \n  get phase() {\n    return this.sampler.getPhase();\n  }\n}\n\n\nsynths = synths.map((e,i) => new GibberishSamplerSynth({id:i}));\n\nexport default { synths, numSamples };\n\n    \n\t\n  \n","'use strict';\n\nimport cantor from 'gui/cantor';\nimport state  from 'state';\nimport audio from 'audio';\nimport config from 'config';\n\nvar canvas = document.querySelector('canvas#fractal-layer'),\n    ctx    = canvas.getContext('2d'),\n    scannerCanvas = document.querySelector('canvas#scanner-layer'),\n    scannerCtx = scannerCanvas.getContext('2d'),\n    segmentH = window.innerHeight / 8,\n    STYLE = config.params.VISUALS.STYLE;\n\n\nfunction dim(i) {\n  return { x: 0, y: i * segmentH, w: window.innerWidth - 150, h: segmentH, segmentId: i };\n}\n\nfunction updateCantor(i, cantorArr) {\n  cantor.plot(ctx, cantorArr, dim(i), STYLE);\n}\n\nfunction updateIterations(i, iterations) {\n  var y = i * segmentH + 5,\n      x = window.innerWidth - 5;\n  ctx.clearRect(x - 25, y, 25, 22);\n  ctx.textBaseline = 'hanging';\n  ctx.textAlign    = 'right';\n  ctx.fillStyle    = 'grey';\n  ctx.font         = '22px monospace';\n  ctx.fillText(iterations, x, y);\n}\n\n// Sorry...\nfunction updateSliders(n, params) {\n  var i = params.length,\n      x = Math.ceil(window.innerWidth - 70),\n      y = n * segmentH,\n      w = 95,\n      h = segmentH,\n      sw = Math.floor(w / i),\n      sh;\n  //  console.log(n, i, x, y, w, h, sw);\n  \n  ctx.fillStyle = 'black';\n  ctx.fillRect(x - w + sw, y, w, segmentH);\n\n  ctx.fillStyle = 'grey';\n\n  // if this is the focused generator, have it stand out a little\n  if (n == state.focus)\n    ctx.fillStyle = 'white';\n\n  // Display the number of the generator on the right\n  //ctx.font         = '22px monospace';\n  ctx.fillText(n+1 ,x+50, y+segmentH/2);\n  \n  while (i--) {\n    sh = 0 - (h * params[i]);\n    ctx.fillRect(x + 1, y + h, sw - 1, sh);\n    x -= sw;\n  }\n}\n\n// http://jsfiddle.net/chicagogrooves/nRpVD/2/\nvar fpsInterval = 1000 / config.params.VISUALS.FPS,\n    startTime = window.performance.now(),\n    then = startTime,\n    frameCount = 0;\n    //$osd = document.getElementById(\"osd\"),\n\n\nfunction updateScanners(now) {\n  if (!config.params.VISUALS.drawScanLines) \n    return;\n\n  // request another frame\n  requestAnimationFrame(updateScanners);\n\n  var elapsed = now - then;\n\n  // if enough time has elapsed, draw the next frame\n  if (elapsed > fpsInterval) {\n\n    // Get ready for next frame by setting then=now, but...\n    // Also, adjust for fpsInterval not being multiple of 16.67\n    then = now - (elapsed % fpsInterval);\n    \n    // draw stuff here        \n    scannerCtx.fillStyle = 'white';        \n    state.getActiveStateIds().map( (i) => updateScanner(i));\n        \n    // TESTING...Report #seconds since start and achieved fps.\n    // var sinceStart = now - startTime;\n    // var currentFps = Math.round(1000 / (sinceStart / ++frameCount) * 100) / 100;\n    // $osd.innerHTML = \"Elapsed time= \" + Math.round(sinceStart / 1000 * 100) / 100 + \" secs @ \" + currentFps + \" fps.\";\n    \n  }\n  \n}\n\nfunction updateScanner(i) {\n  var dimI = dim(i),\n      stateI = state.load(i),\n      phaseI = audio.synths[i].phase;\n  \n  if (stateI.lastphaseOnScreen !== undefined) {\n    scannerCtx.clearRect(stateI.lastphaseOnScreen-1, dimI.y-1, 2, dimI.h+2);\n  }\n  else { //fallback to clearing the whole segment\n    scannerCtx.clearRect(dimI.x, dimI.y, dimI.w, dimI.h);\n  }\n  \n  if (phaseI !== undefined) {\n    //FIXME: hacky\n    stateI.numSamples = stateI.numSamples || Math.pow(stateI.pattern.length,stateI.iterations);\n    \n    // Faster rounding: http://www.html5rocks.com/en/tutorials/canvas/performance/#toc-avoid-float\n    // var phaseOnScreen = Math.round( ((phaseI%stateI.numSamples)/stateI.numSamples) * dimI.w + dimI.x );\n    var phaseOnScreen = (0.5 + ((phaseI%stateI.numSamples)/stateI.numSamples) * dimI.w + dimI.x) | 0;\n    \n    scannerCtx.fillRect(phaseOnScreen, dimI.y, 1, dimI.h);\n    stateI.phase = phaseI;\n    stateI.lastphaseOnScreen = phaseOnScreen;\n  }\n}\n  \nfunction updateAll() {\n  var stateI,\n      i = 8;\n  while (i--) {\n    stateI = state.load(i);\n    if (stateI.cantor !== undefined) {\n      updateCantor(i, stateI.cantor);\n    }\n    if (stateI.iterations !== undefined) {\n      updateIterations(i, stateI.iterations);\n    }\n    \n    // redraw the sliders too\n    updateSliders(i,stateI.pattern);\n  }\n}\n\nfunction resizeCanvas() {\n  canvas.width  = window.innerWidth;\n  canvas.height = window.innerHeight - 4;\n\n  scannerCanvas.width = canvas.width;\n  scannerCanvas.height = canvas.height;\n}\n\nwindow.onresize = resizeCanvas;\nresizeCanvas();\n\nupdateScanners();\n\nexport default { updateCantor, updateIterations, updateSliders, updateScanners, STYLE };\n","'use strict';\n\nvar solarized =\n    [[45,100,71], //yellow\n     [18,89,80],  //orange\n     [1,79,86],   //red\n     [331,74,83], //magenta\n     [237,45,77], //violet\n     [205,82,82], //blue\n     [175,74,63], //cyan\n     [68,100,60]  //green\n    ];\n\nfunction plotIteration(ctx, iteration, dimensions, STYLE) {\n  if (typeof iteration === \"undefined\") return;\n  \n  var i = iteration.length,\n      segmentW = dimensions.w / i,\n      c, y, h,s,l;\n\n  if (STYLE.withColours)\n    while (i--) {\n      // more fun\n      // c = Math.round(360 * iteration[i]);\n      // ctx.fillStyle = `hsl(${c}, 60%, 60%)`;\n\n      // more accurate\n      // c = Math.round(100 * iteration[i]);     \n      // ctx.fillStyle = `hsl(12, ${c}%, ${c}%)`;\n\n      //solarized & accurate (we vary the lightness/brightness of the colours)\n      c = Math.round(100 * iteration[i]);\n      h = solarized[dimensions.segmentId][0];\n      s = solarized[dimensions.segmentId][1];\n      ctx.fillStyle = `hsl(${h}, ${s}%, ${c}%)`;\n\n      y = dimensions.y;      \n      ctx.fillRect(segmentW * i, y, segmentW, dimensions.h);\n    }\n  else \n    while (i--) {\n      c = Math.round(255 * iteration[i]);\n      if (STYLE.invertColours) c = 255-c;\n      ctx.fillStyle = `rgb(${c}, ${c}, ${c})`;\n          \n      y = dimensions.y;      \n      ctx.fillRect(segmentW * i, y, segmentW, dimensions.h);\n    }\n  \n}\n\nfunction plot(ctx, cantor, dimensions, STYLE) {\n  var i = Math.min(cantor.length, 8),\n      h = dimensions.h,\n      dim;\n\n  if (!STYLE.drawAllLevels) {\n    dim = Object.create(dimensions);\n    plotIteration(ctx, cantor[i-1], dim, STYLE);\n  }\n  else {     \n    dimensions.h = h / i;\n  \n    while (i--) {\n      dim = Object.create(dimensions);\n      dim.y = dim.y + dim.h * i;\n      dim.level = i;\n      plotIteration(ctx, cantor[i-1], dim, STYLE);\n    }\n  }\n}\n\nexport default { plot };\n","'use strict';\n\nimport player from 'player';\nwindow.player        = player;\nwindow.play          = player.play;\nwindow.playDebounced = player.playDebounced;\n\nimport initLaunchpad     from 'controllers/launchpad';\nimport initLaunchControl from 'controllers/novation-launchcontrol';\nimport initCMDLC1        from 'controllers/cmd-lc1';\nimport initKeyboard      from 'controllers/keyboard';\nwindow.initLaunchpad     = initLaunchpad;\nwindow.initLaunchControl = initLaunchControl;\nwindow.initCMDLC1        = initCMDLC1;\nwindow.initKeyboard      = initKeyboard;\n\ninitKeyboard();\n\nimport { availableDevices } from 'midi';\nwindow.availableDevices = availableDevices;\n\nimport state from 'state';\nimport gui from 'gui';\nimport controls from 'controllers/cmd-lc1/controls';\nimport audio from 'audio';\n\n//window.audio = audio;\n//window.state = state;\n// window.controls = controls;\n\n// Recreate the instrument state from the URL\nif (state.loadFromURL()) {\n  \n  // initialise (all) the controls from the state\n  controls.init();\n\n  // these are the states that have been initialised\n  var activeStateIds = state.getActiveStateIds();\n  \n  // load synth parameters (amp, pitch, phase, etc) from the states\n  audio.loadSynthParamsFromState(activeStateIds);\n  \n  // force cantor data re-generation and play\n  activeStateIds.map( (id, i) => { controls.setFocus(id); controls.adjustPattern({encoder: id, change: 0}) } );\n}\n\n\n","'use strict';\n\nvar midiAccess;\n\nfunction findDevice(devices, nameRegex) {\n  var result = devices.next();\n  while (!result.done) {\n    if (nameRegex.test(result.value.name)) { return result.value; }\n    result = devices.next();\n  }\n}\n\n// Callback gets the input and output as arguments\n// Name should be a regex\n//\nfunction getDevice(cb, nameRegex) {\n  navigator.requestMIDIAccess().then(\n    (midiAccess) => {\n      var inputs  = midiAccess.inputs.values(),\n          outputs = midiAccess.outputs.values(),\n          input   = findDevice(inputs, nameRegex),\n          output  = findDevice(outputs, nameRegex);\n      cb(input, output);\n    },\n    ( ) => { console.log('Failed to get midi access.'); }\n  );\n}\n\nexport default { getDevice };\n","'use strict';\n\nimport state from 'state';\n\nvar numSynths = 8,\n    audioCtxConstructor = (window.AudioContext || window.webkitAudioContext),\n    audioCtx   = new audioCtxConstructor(),\n    numSamples = Math.pow(2, 19),\n    synths     = Array.apply(null, { length: numSynths });\n\n\nclass WavetableSynth {\n  constructor(options) {\n    // forward compatilibity\n    this.id = options.id;\n    var source = audioCtx.createBufferSource(),\n        buffer = audioCtx.createBuffer(2, numSamples, audioCtx.sampleRate);\n    var mutedvolume = undefined;\n    this.channels = {\n      left:  buffer.getChannelData(0),\n      right: buffer.getChannelData(1),\n    };\n    this.source = source;\n    this.gain = audioCtx.createGain();\n    source.playbackRate.value = 1 / 8;\n    source.loop   = true;\n    source.buffer = buffer;\n    source.connect(this.gain);\n    this.gain.connect(audioCtx.destination);\n    source.start();\n  }\n\n  set wavetable(samples) {\n    var numFrames = samples.length,\n        left  = this.channels.left,\n        right = this.channels.right,\n        len, i;\n\n    //console.log(numFrames /*2^14*/, left.length /*2^19*/);\n    \n    for (i = 0, len = left.length; i < len; i++) {\n      left[i]  = samples[i % numFrames];\n      right[i] = samples[i % numFrames];\n    }\n  }\n  get wavetable() {\n    return [this.channels.left, this.channels.right];\n  }\n\n\n  // forward compatibility\n  set pitch(pitch) {\n    this.source.playbackRate.value = pitch;\n    state.load(this.id).pitch = pitch;\n  }\n\n  // forward compatibility\n  get pitch() {\n    return this.source.playbackRate\n  }\n\n  \n  playRatechange(factor) {\n    var rate = this.source.playbackRate.value;\n    rate *= factor;\n    // if (rate > 1)\n    //   rate = 1;\n    this.source.playbackRate.value = rate;\n    state.load(this.id).pitch = rate;\n    return rate;\n  }\n    \n  // forward compatibility\n  set amp(value) {\n    this.volume = value;\n    state.load(this.id).amp = value;\n  }\n\n  // forward compatibility\n  get amp() {\n    return this.volume;\n  }\n\n  \n  set volume(value) {\n    this.gain.gain.value = value;\n  }\n  get volume() {\n    return this.gain.gain.value;\n  }\n  \n  togglemute() {\n    if (this.mutedvolume === undefined) {\n      this.mutedvolume = this.gain.gain.value;\n      this.gain.gain.value = 0.0;\n    }\n    else {\n      this.gain.gain.value = this.mutedvolume;\n      this.mutedvolume = undefined;\n    }      \n  }\n\n  // forward compatilibity\n  set phase(phase) {\n  }\n  get phase() {\n    return 0;\n  }\n}\n\nsynths = synths.map((e,i) => new WavetableSynth({id:i}));\n\nexport default { synths, numSamples };\n\n","'use strict';\n\nimport audio from 'audio'\nimport gui   from 'gui';\nimport state from 'state';\nimport config from 'config'\n\nvar debouncedTimeouts = [],\n    workers = [];\n\nfunction updateSynthAndGUI(i, data) {\n  var cantor    = data.cantor,\n      wavetable = cantor[cantor.length - 1];\n  state.save(i, data);\n  audio.synths[i].wavetable = wavetable;\n\n  if (config.params.AUDIO.resetPhaseOnNewBuffer) {    \n    state.load(i).phase = 0;\n    audio.synths[i].phase = 0;\n  }\n  \n  gui.updateIterations(i, data.iterations); //BE-raf:to-remove\n  gui.updateCantor(i, cantor); //BE-raf:to-remove\n}\n\nfunction resetWorker(i, cb) {\n  if (workers[i] && workers[i].terminate) {\n    workers[i].terminate();\n  }\n  workers[i] = new Worker('worker/cantor.js');\n  workers[i].onmessage = cb;\n}\n\nfunction play(i, pattern, iterations) {\n  var cb,\n      data = { pattern, iterations };\n  cb = function(e) {\n    data.cantor = e.data;\n    updateSynthAndGUI(i, data);\n  };\n  resetWorker(i, cb);\n  workers[i].postMessage([pattern, iterations]);\n}\n\nfunction playDebounced(i, pattern, iterations, timeout = 250) {\n  clearTimeout(debouncedTimeouts[i]);\n  debouncedTimeouts[i] = setTimeout(\n    () => play(i, pattern, iterations),\n    timeout\n  );\n}\n\nfunction togglemute(i) {\n  audio.synths[i].togglemute();\n}\n\nfunction volume(i, value, isdelta) {\n  var vol = audio.synths[i].volume;\n  \n  if (isdelta)\n    vol = vol + value;\n  else\n    vol = value;\n  \n  if (vol < 0.0)\n    vol = 0;\n  if (vol > 10.0)\n    vol = 10.0;\n  \n  audio.synths[i].volume = vol;\n}\n\nfunction playRatechange(i, factor) {\n  audio.synths[i].playRatechange(factor);  \n}\n\nexport default { play, playDebounced, volume, togglemute, playRatechange };\n","'use strict';\n\nvar state = [],\n    focus = undefined,\n    buffer = undefined;\n\nfunction save(i, data) {\n  state[i] = Object.assign({}, state[i], data);\n}\n\nfunction load(i) {\n  return state[i] || { iterations: 7, pattern: [0.5,0.5,0.5,0.5], numSamples: Math.pow(4,7), phase:undefined, lastphaseOnScreen:undefined };\n}\n\nfunction toJSON() {\n  //var selector = function(key,value) { if (key === \"cantor\") { return undefined; } else { return value;} }\n  var selector = [\"iterations\", \"pattern\", \"amp\", \"pitch\", \"phase\"];\n  return JSON.stringify(state, selector);\n}\n\nfunction setFromJSON(json) {\n  state = JSON.parse(json);\n}\n\n// state -> url\nfunction saveToURL() {\n  var data = encodeURI(toJSON());\n  // var url = window.location.protocol\n  //     + \"//\"\n  //     + window.location.hostname\n  //     + \":\"\n  //     + window.location.port\n  //     + \"/\"\n  //     + \"#\"\n  //     + data;\n\n  window.location.href = \"#STATE:\"+data;\n  return window.location.href;\n}\n\n\n// url -> state\nfunction loadFromURL(url) {\n  var url = url || window.location.href;\n  var json = decodeURI(url).split(/#STATE:/)[1];\n  if (json !== undefined) {\n    setFromJSON(json);\n    //FIXME: hacky\n    state.forEach( (s) => { if (s && s.pattern && s.iterations) s.numSamples = Math.pow(s.pattern.length, s.iterations) } );\n    return true;\n  }\n  else {\n    return false;\n  }\n}\n\nfunction copytobuffer(i) {\n  buffer = Object.assign ({}, state[i]);\n  buffer.phase = buffer.lastphaseOnScreen = undefined; // don't copy these for now\n}\n\nfunction savefrombuffer(i) {\n  if (!buffer) return false;\n  state[i] = buffer;\n  state[i].pattern = buffer.pattern.slice(0);\n  return state[i];\n}\n\nfunction getActiveStateIds() {\n  var active = [];\n  for (var i=0; i<state.length; i++) {\n    if (state[i]) {\n      active.push(i);\n    }\n  }\n  return active;\n}\n\n\nexport default { save, load, focus, copytobuffer, savefrombuffer, toJSON, setFromJSON, saveToURL, loadFromURL, getActiveStateIds};\n"]}